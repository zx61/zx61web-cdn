import{ac as te,b0 as de,aS as fe,ai as X,bt as me,al as ve,a7 as Z,b_ as pe,b8 as se,bS as J,W as j,bR as ye,b$ as ge,bv as be,c0 as Ce,aF as W,$ as _,a1 as q,d as Y,i as z,c1 as H,aE as C,bo as he,a0 as ke,aq as Ee,aM as G,c2 as we,aa as O,o as F,c as U,b as V,J as k,h as o,t as Me,w as B,k as K,N as Se,K as Te,j as x,af as ne,ag as le,c3 as Be,c4 as De,a2 as Ie,c5 as $e,bZ as Q,r as D,c6 as Le,aj as Fe,am as Oe,c7 as Ae,c8 as ee,aR as Pe,ah as oe,aT as Ne,as as Re,c9 as ze,aW as Ye,aV as Ve,b5 as We,b1 as He,ca as Ue,an as Xe}from"./chunk-0f9d6c2a.js";import{U as ae}from"./chunk-9519ab40.js";import{c as je}from"./chunk-f493cd2a.js";const qe=(e,s,r)=>{let a={offsetX:0,offsetY:0};const u=n=>{const i=n.clientX,v=n.clientY,{offsetX:f,offsetY:p}=a,t=e.value.getBoundingClientRect(),m=t.left,E=t.top,A=t.width,P=t.height,N=document.documentElement.clientWidth,I=document.documentElement.clientHeight,R=-m+f,$=-E+p,w=N-m-A+f,M=I-E-P+p,L=h=>{const l=Math.min(Math.max(f+h.clientX-i,R),w),b=Math.min(Math.max(p+h.clientY-v,$),M);a={offsetX:l,offsetY:b},e.value.style.transform=`translate(${X(l)}, ${X(b)})`},y=()=>{document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",y)};document.addEventListener("mousemove",L),document.addEventListener("mouseup",y)},d=()=>{s.value&&e.value&&s.value.addEventListener("mousedown",u)},c=()=>{s.value&&e.value&&s.value.removeEventListener("mousedown",u)};te(()=>{de(()=>{r.value?d():c()})}),fe(()=>{c()})},Ke=(e,s={})=>{me(e)||ve("[useLockscreen]","You need to pass a ref param to this function");const r=s.ns||Z("popup"),a=pe(()=>r.bm("parent","hidden"));if(!se||J(document.body,a.value))return;let u=0,d=!1,c="0";const n=()=>{setTimeout(()=>{Ce(document==null?void 0:document.body,a.value),d&&document&&(document.body.style.width=c)},200)};j(e,i=>{if(!i){n();return}d=!J(document.body,a.value),d&&(c=document.body.style.width),u=je(r.namespace.value);const v=document.documentElement.clientHeight<document.body.scrollHeight,f=ye(document.body,"overflowY");u>0&&(v||f==="scroll")&&d&&(document.body.style.width=`calc(100% - ${u}px)`),ge(document.body,a.value)}),be(()=>n())},ce=e=>{if(!e)return{onClick:W,onMousedown:W,onMouseup:W};let s=!1,r=!1;return{onClick:c=>{s&&r&&e(c),s=r=!1},onMousedown:c=>{s=c.target===c.currentTarget},onMouseup:c=>{r=c.target===c.currentTarget}}},xe=_({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:q([String,Array,Object])},zIndex:{type:q([String,Number])}}),Ze={click:e=>e instanceof MouseEvent},_e="overlay";var Je=Y({name:"ElOverlay",props:xe,emits:Ze,setup(e,{slots:s,emit:r}){const a=Z(_e),u=i=>{r("click",i)},{onClick:d,onMousedown:c,onMouseup:n}=ce(e.customMaskEvent?void 0:u);return()=>e.mask?z("div",{class:[a.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:d,onMousedown:c,onMouseup:n},[C(s,"default")],H.STYLE|H.CLASS|H.PROPS,["onClick","onMouseup","onMousedown"]):he("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[C(s,"default")])}});const Ge=Je,ue=Symbol("dialogInjectionKey"),ie=_({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:ke},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),Qe={close:()=>!0},eo=["aria-label"],oo=["id"],to=Y({name:"ElDialogContent"}),so=Y({...to,props:ie,emits:Qe,setup(e){const s=e,{t:r}=Ee(),{Close:a}=Be,{dialogRef:u,headerRef:d,bodyId:c,ns:n,style:i}=G(ue),{focusTrapRef:v}=G(we),f=De(v,u),p=O(()=>s.draggable);return qe(u,d,p),(t,m)=>(F(),U("div",{ref:o(f),class:k([o(n).b(),o(n).is("fullscreen",t.fullscreen),o(n).is("draggable",o(p)),o(n).is("align-center",t.alignCenter),{[o(n).m("center")]:t.center},t.customClass]),style:ne(o(i)),tabindex:"-1"},[V("header",{ref_key:"headerRef",ref:d,class:k(o(n).e("header"))},[C(t.$slots,"header",{},()=>[V("span",{role:"heading",class:k(o(n).e("title"))},Me(t.title),3)]),t.showClose?(F(),U("button",{key:0,"aria-label":o(r)("el.dialog.close"),class:k(o(n).e("headerbtn")),type:"button",onClick:m[0]||(m[0]=E=>t.$emit("close"))},[z(o(Te),{class:k(o(n).e("close"))},{default:B(()=>[(F(),K(Se(t.closeIcon||o(a))))]),_:1},8,["class"])],10,eo)):x("v-if",!0)],2),V("div",{id:o(c),class:k(o(n).e("body"))},[C(t.$slots,"default")],10,oo),t.$slots.footer?(F(),U("footer",{key:0,class:k(o(n).e("footer"))},[C(t.$slots,"footer")],2)):x("v-if",!0)],6))}});var no=le(so,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const lo=_({...ie,appendToBody:{type:Boolean,default:!1},beforeClose:{type:q(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),ao={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ae]:e=>Ie(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},co=(e,s)=>{const a=Oe().emit,{nextZIndex:u}=$e();let d="";const c=Q(),n=Q(),i=D(!1),v=D(!1),f=D(!1),p=D(e.zIndex||u());let t,m;const E=Le("namespace",Ae),A=O(()=>{const g={},T=`--${E.value}-dialog`;return e.fullscreen||(e.top&&(g[`${T}-margin-top`]=e.top),e.width&&(g[`${T}-width`]=X(e.width))),g}),P=O(()=>e.alignCenter?{display:"flex"}:{});function N(){a("opened")}function I(){a("closed"),a(ae,!1),e.destroyOnClose&&(f.value=!1)}function R(){a("close")}function $(){m==null||m(),t==null||t(),e.openDelay&&e.openDelay>0?{stop:t}=ee(()=>y(),e.openDelay):y()}function w(){t==null||t(),m==null||m(),e.closeDelay&&e.closeDelay>0?{stop:m}=ee(()=>h(),e.closeDelay):h()}function M(){function g(T){T||(v.value=!0,i.value=!1)}e.beforeClose?e.beforeClose(g):w()}function L(){e.closeOnClickModal&&M()}function y(){se&&(i.value=!0)}function h(){i.value=!1}function l(){a("openAutoFocus")}function b(){a("closeAutoFocus")}function S(g){var T;((T=g.detail)==null?void 0:T.focusReason)==="pointer"&&g.preventDefault()}e.lockScroll&&Ke(i);function re(){e.closeOnPressEscape&&M()}return j(()=>e.modelValue,g=>{g?(v.value=!1,$(),f.value=!0,p.value=e.zIndex?p.value++:u(),Fe(()=>{a("open"),s.value&&(s.value.scrollTop=0)})):i.value&&w()}),j(()=>e.fullscreen,g=>{s.value&&(g?(d=s.value.style.transform,s.value.style.transform=""):s.value.style.transform=d)}),te(()=>{e.modelValue&&(i.value=!0,f.value=!0,$())}),{afterEnter:N,afterLeave:I,beforeLeave:R,handleClose:M,onModalClick:L,close:w,doClose:h,onOpenAutoFocus:l,onCloseAutoFocus:b,onCloseRequested:re,onFocusoutPrevented:S,titleId:c,bodyId:n,closed:v,style:A,overlayDialogStyle:P,rendered:f,visible:i,zIndex:p}},uo=["aria-label","aria-labelledby","aria-describedby"],io=Y({name:"ElDialog",inheritAttrs:!1}),ro=Y({...io,props:lo,emits:ao,setup(e,{expose:s}){const r=e,a=Pe();oe({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},O(()=>!!a.title)),oe({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},O(()=>!!r.customClass));const u=Z("dialog"),d=D(),c=D(),n=D(),{visible:i,titleId:v,bodyId:f,style:p,overlayDialogStyle:t,rendered:m,zIndex:E,afterEnter:A,afterLeave:P,beforeLeave:N,handleClose:I,onModalClick:R,onOpenAutoFocus:$,onCloseAutoFocus:w,onCloseRequested:M,onFocusoutPrevented:L}=co(r,d);Ne(ue,{dialogRef:d,headerRef:c,bodyId:f,ns:u,rendered:m,style:p});const y=ce(R),h=O(()=>r.draggable&&!r.fullscreen);return s({visible:i,dialogContentRef:n}),(l,b)=>(F(),K(Ue,{to:"body",disabled:!l.appendToBody},[z(He,{name:"dialog-fade",onAfterEnter:o(A),onAfterLeave:o(P),onBeforeLeave:o(N),persisted:""},{default:B(()=>[Re(z(o(Ge),{"custom-mask-event":"",mask:l.modal,"overlay-class":l.modalClass,"z-index":o(E)},{default:B(()=>[V("div",{role:"dialog","aria-modal":"true","aria-label":l.title||void 0,"aria-labelledby":l.title?void 0:o(v),"aria-describedby":o(f),class:k(`${o(u).namespace.value}-overlay-dialog`),style:ne(o(t)),onClick:b[0]||(b[0]=(...S)=>o(y).onClick&&o(y).onClick(...S)),onMousedown:b[1]||(b[1]=(...S)=>o(y).onMousedown&&o(y).onMousedown(...S)),onMouseup:b[2]||(b[2]=(...S)=>o(y).onMouseup&&o(y).onMouseup(...S))},[z(o(ze),{loop:"",trapped:o(i),"focus-start-el":"container",onFocusAfterTrapped:o($),onFocusAfterReleased:o(w),onFocusoutPrevented:o(L),onReleaseRequested:o(M)},{default:B(()=>[o(m)?(F(),K(no,Ye({key:0,ref_key:"dialogContentRef",ref:n},l.$attrs,{"custom-class":l.customClass,center:l.center,"align-center":l.alignCenter,"close-icon":l.closeIcon,draggable:o(h),fullscreen:l.fullscreen,"show-close":l.showClose,title:l.title,onClose:o(I)}),Ve({header:B(()=>[l.$slots.title?C(l.$slots,"title",{key:1}):C(l.$slots,"header",{key:0,close:o(I),titleId:o(v),titleClass:o(u).e("title")})]),default:B(()=>[C(l.$slots,"default")]),_:2},[l.$slots.footer?{name:"footer",fn:B(()=>[C(l.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):x("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,uo)]),_:3},8,["mask","overlay-class","z-index"]),[[We,o(i)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var fo=le(ro,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const yo=Xe(fo);export{yo as E};
