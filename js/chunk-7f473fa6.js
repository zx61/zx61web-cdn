import{d as de,b0 as ke,aG as Te,a8 as K,br as Me,t as Se,g as te,b6 as fe,bv as se,V as G,bx as Ie,bu as De,bN as Be,bw as Ae,av as X,au as ne,Y as oe,$ as Z,f as W,q as V,bO as j,m as C,bm as Re,Z as _e,ah as $e,aC as le,bP as Le,h as P,o as L,c as q,b as x,k as E,j as s,F as Pe,w as B,i as J,P as Fe,E as Oe,x as Q,n as me,y as ve,bQ as Ne,bR as ze,a0 as Ye,bo as Ve,bS as ae,r as A,bT as We,ad as xe,ac as He,bU as Ue,bV as ie,aF as Xe,a5 as re,aH as je,ak as qe,bW as Ke,aK as Ge,aJ as Ze,b3 as Je,T as Qe,bX as et,z as tt}from"./chunk-ad293b71.js";import{T as ot,U as pe}from"./chunk-9021d099.js";const ye=Symbol("dialogInjectionKey"),st=(e,t,o)=>{let n={offsetX:0,offsetY:0};const l=i=>{const d=i.clientX,f=i.clientY,{offsetX:v,offsetY:p}=n,r=e.value.getBoundingClientRect(),m=r.left,T=r.top,F=r.width,O=r.height,N=document.documentElement.clientWidth,R=document.documentElement.clientHeight,z=-m+v,_=-T+p,M=N-m-F+v,S=R-T-O+p,$=w=>{const u=Math.min(Math.max(v+w.clientX-d,z),M),g=Math.min(Math.max(p+w.clientY-f,_),S);n={offsetX:u,offsetY:g},e.value.style.transform=`translate(${K(u)}, ${K(g)})`},y=()=>{document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",y)};document.addEventListener("mousemove",$),document.addEventListener("mouseup",y)},c=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",l)},a=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",l)};de(()=>{ke(()=>{o.value?c():a()})}),Te(()=>{a()})},nt=()=>{},lt=Array.isArray,at=e=>typeof e=="function",it=e=>typeof e=="symbol";let rt;function ct(e,t=rt){t&&t.active&&t.effects.push(e)}const ut=e=>{const t=new Set(e);return t.w=0,t.n=0,t},he=e=>(e.w&k)>0,ge=e=>(e.n&k)>0,dt=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=k},ft=e=>{const{deps:t}=e;if(t.length){let o=0;for(let n=0;n<t.length;n++){const l=t[n];he(l)&&!ge(l)?l.delete(e):t[o++]=l,l.w&=~k,l.n&=~k}t.length=o}};let Y=0,k=1;const ee=30;let b;class mt{constructor(t,o=null,n){this.fn=t,this.scheduler=o,this.active=!0,this.deps=[],this.parent=void 0,ct(this,n)}run(){if(!this.active)return this.fn();let t=b,o=H;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=b,b=this,H=!0,k=1<<++Y,Y<=ee?dt(this):ce(this),this.fn()}finally{Y<=ee&&ft(this),k=1<<--Y,b=this.parent,H=o,this.parent=void 0,this.deferStop&&this.stop()}}stop(){b===this?this.deferStop=!0:this.active&&(ce(this),this.onStop&&this.onStop(),this.active=!1)}}function ce(e){const{deps:t}=e;if(t.length){for(let o=0;o<t.length;o++)t[o].delete(e);t.length=0}}let H=!0;function vt(e,t){let o=!1;Y<=ee?ge(e)||(e.n|=k,o=!he(e)):o=!e.has(b),o&&(e.add(b),b.deps.push(e))}function pt(e,t){const o=lt(e)?e:[...e];for(const n of o)n.computed&&ue(n);for(const n of o)n.computed||ue(n)}function ue(e,t){(e!==b||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(it));function U(e){const t=e&&e.__v_raw;return t?U(t):e}function yt(e){H&&b&&(e=U(e),vt(e.dep||(e.dep=ut())))}function ht(e,t){e=U(e);const o=e.dep;o&&pt(o)}var be;class gt{constructor(t,o,n,l){this._setter=o,this.dep=void 0,this.__v_isRef=!0,this[be]=!1,this._dirty=!0,this.effect=new mt(t,()=>{this._dirty||(this._dirty=!0,ht(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!l,this.__v_isReadonly=n}get value(){const t=U(this);return yt(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}be="__v_isReadonly";function bt(e,t,o=!1){let n,l;const c=at(e);return c?(n=e,l=nt):(n=e.get,l=e.set),new gt(n,l,c||!l,o)}const Ct=e=>{Me(e)||Se("[useLockscreen]","You need to pass a ref param to this function");const t=te("popup"),o=bt(()=>t.bm("parent","hidden"));if(!fe||se(document.body,o.value))return;let n=0,l=!1,c="0";const a=()=>{setTimeout(()=>{Ae(document==null?void 0:document.body,o.value),l&&document&&(document.body.style.width=c)},200)};G(e,i=>{if(!i){a();return}l=!se(document.body,o.value),l&&(c=document.body.style.width),n=ot(t.namespace.value);const d=document.documentElement.clientHeight<document.body.scrollHeight,f=Ie(document.body,"overflowY");n>0&&(d||f==="scroll")&&l&&(document.body.style.width=`calc(100% - ${n}px)`),De(document.body,o.value)}),Be(()=>a())},Ce=e=>{if(!e)return{onClick:X,onMousedown:X,onMouseup:X};let t=!1,o=!1;return{onClick:a=>{t&&o&&e(a),t=o=!1},onMousedown:a=>{t=a.target===a.currentTarget},onMouseup:a=>{o=a.target===a.currentTarget}}},wt=100,Et=600,Wt={beforeMount(e,t){const o=t.value,{interval:n=wt,delay:l=Et}=ne(o)?{}:o;let c,a;const i=()=>ne(o)?o():o.handler(),d=()=>{a&&(clearTimeout(a),a=void 0),c&&(clearInterval(c),c=void 0)};e.addEventListener("mousedown",f=>{f.button===0&&(d(),i(),document.addEventListener("mouseup",()=>d(),{once:!0}),a=setTimeout(()=>{c=setInterval(()=>{i()},n)},l))})}},kt=oe({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:Z([String,Array,Object])},zIndex:{type:Z([String,Number])}}),Tt={click:e=>e instanceof MouseEvent};var Mt=W({name:"ElOverlay",props:kt,emits:Tt,setup(e,{slots:t,emit:o}){const n=te("overlay"),l=d=>{o("click",d)},{onClick:c,onMousedown:a,onMouseup:i}=Ce(e.customMaskEvent?void 0:l);return()=>e.mask?V("div",{class:[n.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:c,onMousedown:a,onMouseup:i},[C(t,"default")],j.STYLE|j.CLASS|j.PROPS,["onClick","onMouseup","onMousedown"]):Re("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[C(t,"default")])}});const St=Mt,we=oe({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:_e},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),It={close:()=>!0},Dt=["aria-label"],Bt=["id"],At=W({name:"ElDialogContent"}),Rt=W({...At,props:we,emits:It,setup(e){const t=e,{t:o}=$e(),{Close:n}=Ne,{dialogRef:l,headerRef:c,bodyId:a,ns:i,style:d}=le(ye),{focusTrapRef:f}=le(Le),v=ze(f,l),p=P(()=>t.draggable);return st(l,c,p),(r,m)=>(L(),q("div",{ref:s(v),class:E([s(i).b(),s(i).is("fullscreen",r.fullscreen),s(i).is("draggable",s(p)),s(i).is("align-center",r.alignCenter),{[s(i).m("center")]:r.center},r.customClass]),style:me(s(d)),tabindex:"-1"},[x("header",{ref_key:"headerRef",ref:c,class:E(s(i).e("header"))},[C(r.$slots,"header",{},()=>[x("span",{role:"heading",class:E(s(i).e("title"))},Pe(r.title),3)]),r.showClose?(L(),q("button",{key:0,"aria-label":s(o)("el.dialog.close"),class:E(s(i).e("headerbtn")),type:"button",onClick:m[0]||(m[0]=T=>r.$emit("close"))},[V(s(Oe),{class:E(s(i).e("close"))},{default:B(()=>[(L(),J(Fe(r.closeIcon||s(n))))]),_:1},8,["class"])],10,Dt)):Q("v-if",!0)],2),x("div",{id:s(a),class:E(s(i).e("body"))},[C(r.$slots,"default")],10,Bt),r.$slots.footer?(L(),q("footer",{key:0,class:E(s(i).e("footer"))},[C(r.$slots,"footer")],2)):Q("v-if",!0)],6))}});var _t=ve(Rt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const $t=oe({...we,appendToBody:{type:Boolean,default:!1},beforeClose:{type:Z(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),Lt={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[pe]:e=>Ye(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Pt=(e,t)=>{const n=He().emit,{nextZIndex:l}=Ve();let c="";const a=ae(),i=ae(),d=A(!1),f=A(!1),v=A(!1),p=A(e.zIndex||l());let r,m;const T=We("namespace",Ue),F=P(()=>{const h={},D=`--${T.value}-dialog`;return e.fullscreen||(e.top&&(h[`${D}-margin-top`]=e.top),e.width&&(h[`${D}-width`]=K(e.width))),h}),O=P(()=>e.alignCenter?{display:"flex"}:{});function N(){n("opened")}function R(){n("closed"),n(pe,!1),e.destroyOnClose&&(v.value=!1)}function z(){n("close")}function _(){m==null||m(),r==null||r(),e.openDelay&&e.openDelay>0?{stop:r}=ie(()=>y(),e.openDelay):y()}function M(){r==null||r(),m==null||m(),e.closeDelay&&e.closeDelay>0?{stop:m}=ie(()=>w(),e.closeDelay):w()}function S(){function h(D){D||(f.value=!0,d.value=!1)}e.beforeClose?e.beforeClose(h):M()}function $(){e.closeOnClickModal&&S()}function y(){fe&&(d.value=!0)}function w(){d.value=!1}function u(){n("openAutoFocus")}function g(){n("closeAutoFocus")}function I(h){var D;((D=h.detail)==null?void 0:D.focusReason)==="pointer"&&h.preventDefault()}e.lockScroll&&Ct(d);function Ee(){e.closeOnPressEscape&&S()}return G(()=>e.modelValue,h=>{h?(f.value=!1,_(),v.value=!0,p.value=e.zIndex?p.value++:l(),xe(()=>{n("open"),t.value&&(t.value.scrollTop=0)})):d.value&&M()}),G(()=>e.fullscreen,h=>{t.value&&(h?(c=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=c)}),de(()=>{e.modelValue&&(d.value=!0,v.value=!0,_())}),{afterEnter:N,afterLeave:R,beforeLeave:z,handleClose:S,onModalClick:$,close:M,doClose:w,onOpenAutoFocus:u,onCloseAutoFocus:g,onCloseRequested:Ee,onFocusoutPrevented:I,titleId:a,bodyId:i,closed:f,style:F,overlayDialogStyle:O,rendered:v,visible:d,zIndex:p}},Ft=["aria-label","aria-labelledby","aria-describedby"],Ot=W({name:"ElDialog",inheritAttrs:!1}),Nt=W({...Ot,props:$t,emits:Lt,setup(e,{expose:t}){const o=e,n=Xe();re({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},P(()=>!!n.title)),re({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},P(()=>!!o.customClass));const l=te("dialog"),c=A(),a=A(),i=A(),{visible:d,titleId:f,bodyId:v,style:p,overlayDialogStyle:r,rendered:m,zIndex:T,afterEnter:F,afterLeave:O,beforeLeave:N,handleClose:R,onModalClick:z,onOpenAutoFocus:_,onCloseAutoFocus:M,onCloseRequested:S,onFocusoutPrevented:$}=Pt(o,c);je(ye,{dialogRef:c,headerRef:a,bodyId:v,ns:l,rendered:m,style:p});const y=Ce(z),w=P(()=>o.draggable&&!o.fullscreen);return t({visible:d,dialogContentRef:i}),(u,g)=>(L(),J(et,{to:"body",disabled:!u.appendToBody},[V(Qe,{name:"dialog-fade",onAfterEnter:s(F),onAfterLeave:s(O),onBeforeLeave:s(N),persisted:""},{default:B(()=>[qe(V(s(St),{"custom-mask-event":"",mask:u.modal,"overlay-class":u.modalClass,"z-index":s(T)},{default:B(()=>[x("div",{role:"dialog","aria-modal":"true","aria-label":u.title||void 0,"aria-labelledby":u.title?void 0:s(f),"aria-describedby":s(v),class:E(`${s(l).namespace.value}-overlay-dialog`),style:me(s(r)),onClick:g[0]||(g[0]=(...I)=>s(y).onClick&&s(y).onClick(...I)),onMousedown:g[1]||(g[1]=(...I)=>s(y).onMousedown&&s(y).onMousedown(...I)),onMouseup:g[2]||(g[2]=(...I)=>s(y).onMouseup&&s(y).onMouseup(...I))},[V(s(Ke),{loop:"",trapped:s(d),"focus-start-el":"container",onFocusAfterTrapped:s(_),onFocusAfterReleased:s(M),onFocusoutPrevented:s($),onReleaseRequested:s(S)},{default:B(()=>[s(m)?(L(),J(_t,Ge({key:0,ref_key:"dialogContentRef",ref:i},u.$attrs,{"custom-class":u.customClass,center:u.center,"align-center":u.alignCenter,"close-icon":u.closeIcon,draggable:s(w),fullscreen:u.fullscreen,"show-close":u.showClose,title:u.title,onClose:s(R)}),Ze({header:B(()=>[u.$slots.title?C(u.$slots,"title",{key:1}):C(u.$slots,"header",{key:0,close:s(R),titleId:s(f),titleClass:s(l).e("title")})]),default:B(()=>[C(u.$slots,"default")]),_:2},[u.$slots.footer?{name:"footer",fn:B(()=>[C(u.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):Q("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,Ft)]),_:3},8,["mask","overlay-class","z-index"]),[[Je,s(d)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var zt=ve(Nt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const xt=tt(zt);export{xt as E,Wt as v};
