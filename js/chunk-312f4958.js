import{d as Te,aA as tt,aB as Ve,at as be,aC as st,t as me,g as Q,aD as ot,a4 as Ue,aE as Fe,V as re,aF as nt,aG as at,aH as lt,aI as rt,aJ as A,ae as ge,Y as x,a2 as I,f as j,q as B,aK as ye,m as _,aL as ut,a1 as it,aM as Pe,aN as he,aO as ct,h as T,o as k,c as L,b as W,k as w,j as e,F as ue,w as R,i as M,P as ze,E as Z,x as P,n as te,y as oe,aP as dt,aQ as ft,an as pt,af as mt,aR as _e,r as J,aS as vt,ay as yt,ax as bt,aT as gt,a9 as Le,aU as je,aq as Re,aV as He,$ as ke,aW as ht,aX as we,aY as Ce,a0 as kt,T as wt,aZ as Ct,z as ve,a_ as $t,Z as G,a$ as ae,U as Et,ao as St,b0 as fe,ap as Nt,as as ie,b1 as It,av as le,b2 as Tt,b3 as Pt,b4 as Ft,b5 as _t,l as se,ac as $e,au as Ee,b6 as Lt,b7 as Ke,b8 as Rt,b9 as qe,ba as Ye,a3 as Se,G as Dt,H as At,bb as Bt,bc as Mt,bd as Ot,be as Vt,bf as Ut,s as Ne,bg as zt,bh as jt,bi as Ht}from"./chunk-d7c045dd.js";import{l as Kt,U as ne,C as We,I as pe,h as qt}from"./chunk-3b27387f.js";const Xe=Symbol("dialogInjectionKey"),Ge=Symbol("uploadContextKey"),Yt=(t,o,n)=>{let s={offsetX:0,offsetY:0};const m=d=>{const b=d.clientX,v=d.clientY,{offsetX:C,offsetY:h}=s,a=t.value.getBoundingClientRect(),c=a.left,l=a.top,g=a.width,$=a.height,y=document.documentElement.clientWidth,O=document.documentElement.clientHeight,f=-c+C,F=-l+h,D=y-c-g+C,N=O-l-$+h,V=Y=>{const S=Math.min(Math.max(C+Y.clientX-b,f),D),U=Math.min(Math.max(h+Y.clientY-v,F),N);s={offsetX:S,offsetY:U},t.value.style.transform=`translate(${be(S)}, ${be(U)})`},H=()=>{document.removeEventListener("mousemove",V),document.removeEventListener("mouseup",H)};document.addEventListener("mousemove",V),document.addEventListener("mouseup",H)},u=()=>{o.value&&t.value&&o.value.addEventListener("mousedown",m)},i=()=>{o.value&&t.value&&o.value.removeEventListener("mousedown",m)};Te(()=>{tt(()=>{n.value?u():i()})}),Ve(()=>{i()})},Wt=t=>{st(t)||me("[useLockscreen]","You need to pass a ref param to this function");const o=Q("popup"),n=ot(()=>o.bm("parent","hidden"));if(!Ue||Fe(document.body,n.value))return;let s=0,m=!1,u="0";const i=()=>{setTimeout(()=>{rt(document==null?void 0:document.body,n.value),m&&document&&(document.body.style.width=u)},200)};re(t,d=>{if(!d){i();return}m=!Fe(document.body,n.value),m&&(u=document.body.style.width),s=Kt(o.namespace.value);const b=document.documentElement.clientHeight<document.body.scrollHeight,v=nt(document.body,"overflowY");s>0&&(b||v==="scroll")&&m&&(document.body.style.width=`calc(100% - ${s}px)`),at(document.body,n.value)}),lt(()=>i())},Ze=t=>{if(!t)return{onClick:A,onMousedown:A,onMouseup:A};let o=!1,n=!1;return{onClick:i=>{o&&n&&t(i),o=n=!1},onMousedown:i=>{o=i.target===i.currentTarget},onMouseup:i=>{n=i.target===i.currentTarget}}},Xt=100,Gt=600,De={beforeMount(t,o){const n=o.value,{interval:s=Xt,delay:m=Gt}=ge(n)?{}:n;let u,i;const d=()=>ge(n)?n():n.handler(),b=()=>{i&&(clearTimeout(i),i=void 0),u&&(clearInterval(u),u=void 0)};t.addEventListener("mousedown",v=>{v.button===0&&(b(),d(),document.addEventListener("mouseup",()=>b(),{once:!0}),i=setTimeout(()=>{u=setInterval(()=>{d()},s)},m))})}},Zt=x({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:I([String,Array,Object])},zIndex:{type:I([String,Number])}}),Jt={click:t=>t instanceof MouseEvent};var Qt=j({name:"ElOverlay",props:Zt,emits:Jt,setup(t,{slots:o,emit:n}){const s=Q("overlay"),m=b=>{n("click",b)},{onClick:u,onMousedown:i,onMouseup:d}=Ze(t.customMaskEvent?void 0:m);return()=>t.mask?B("div",{class:[s.b(),t.overlayClass],style:{zIndex:t.zIndex},onClick:u,onMousedown:i,onMouseup:d},[_(o,"default")],ye.STYLE|ye.CLASS|ye.PROPS,["onClick","onMouseup","onMousedown"]):ut("div",{class:t.overlayClass,style:{zIndex:t.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[_(o,"default")])}});const xt=Qt,Je=x({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:it},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),es={close:()=>!0},ts=["aria-label"],ss=["id"],os=j({name:"ElDialogContent"}),ns=j({...os,props:Je,emits:es,setup(t){const o=t,{t:n}=Pe(),{Close:s}=dt,{dialogRef:m,headerRef:u,bodyId:i,ns:d,style:b}=he(Xe),{focusTrapRef:v}=he(ct),C=ft(v,m),h=T(()=>o.draggable);return Yt(m,u,h),(a,c)=>(k(),L("div",{ref:e(C),class:w([e(d).b(),e(d).is("fullscreen",a.fullscreen),e(d).is("draggable",e(h)),e(d).is("align-center",a.alignCenter),{[e(d).m("center")]:a.center},a.customClass]),style:te(e(b)),tabindex:"-1"},[W("header",{ref_key:"headerRef",ref:u,class:w(e(d).e("header"))},[_(a.$slots,"header",{},()=>[W("span",{role:"heading",class:w(e(d).e("title"))},ue(a.title),3)]),a.showClose?(k(),L("button",{key:0,"aria-label":e(n)("el.dialog.close"),class:w(e(d).e("headerbtn")),type:"button",onClick:c[0]||(c[0]=l=>a.$emit("close"))},[B(e(Z),{class:w(e(d).e("close"))},{default:R(()=>[(k(),M(ze(a.closeIcon||e(s))))]),_:1},8,["class"])],10,ts)):P("v-if",!0)],2),W("div",{id:e(i),class:w(e(d).e("body"))},[_(a.$slots,"default")],10,ss),a.$slots.footer?(k(),L("footer",{key:0,class:w(e(d).e("footer"))},[_(a.$slots,"footer")],2)):P("v-if",!0)],6))}});var as=oe(ns,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const ls=x({...Je,appendToBody:{type:Boolean,default:!1},beforeClose:{type:I(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),rs={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ne]:t=>pt(t),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},us=(t,o)=>{const s=bt().emit,{nextZIndex:m}=mt();let u="";const i=_e(),d=_e(),b=J(!1),v=J(!1),C=J(!1),h=J(t.zIndex||m());let a,c;const l=vt("namespace",gt),g=T(()=>{const p={},E=`--${l.value}-dialog`;return t.fullscreen||(t.top&&(p[`${E}-margin-top`]=t.top),t.width&&(p[`${E}-width`]=be(t.width))),p}),$=T(()=>t.alignCenter?{display:"flex"}:{});function y(){s("opened")}function O(){s("closed"),s(ne,!1),t.destroyOnClose&&(C.value=!1)}function f(){s("close")}function F(){c==null||c(),a==null||a(),t.openDelay&&t.openDelay>0?{stop:a}=Le(()=>H(),t.openDelay):H()}function D(){a==null||a(),c==null||c(),t.closeDelay&&t.closeDelay>0?{stop:c}=Le(()=>Y(),t.closeDelay):Y()}function N(){function p(E){E||(v.value=!0,b.value=!1)}t.beforeClose?t.beforeClose(p):D()}function V(){t.closeOnClickModal&&N()}function H(){Ue&&(b.value=!0)}function Y(){b.value=!1}function S(){s("openAutoFocus")}function U(){s("closeAutoFocus")}function q(p){var E;((E=p.detail)==null?void 0:E.focusReason)==="pointer"&&p.preventDefault()}t.lockScroll&&Wt(b);function r(){t.closeOnPressEscape&&N()}return re(()=>t.modelValue,p=>{p?(v.value=!1,F(),C.value=!0,h.value=t.zIndex?h.value++:m(),yt(()=>{s("open"),o.value&&(o.value.scrollTop=0)})):b.value&&D()}),re(()=>t.fullscreen,p=>{o.value&&(p?(u=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=u)}),Te(()=>{t.modelValue&&(b.value=!0,C.value=!0,F())}),{afterEnter:y,afterLeave:O,beforeLeave:f,handleClose:N,onModalClick:V,close:D,doClose:Y,onOpenAutoFocus:S,onCloseAutoFocus:U,onCloseRequested:r,onFocusoutPrevented:q,titleId:i,bodyId:d,closed:v,style:g,overlayDialogStyle:$,rendered:C,visible:b,zIndex:h}},is=["aria-label","aria-labelledby","aria-describedby"],cs=j({name:"ElDialog",inheritAttrs:!1}),ds=j({...cs,props:ls,emits:rs,setup(t,{expose:o}){const n=t,s=je();Re({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},T(()=>!!s.title)),Re({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},T(()=>!!n.customClass));const m=Q("dialog"),u=J(),i=J(),d=J(),{visible:b,titleId:v,bodyId:C,style:h,overlayDialogStyle:a,rendered:c,zIndex:l,afterEnter:g,afterLeave:$,beforeLeave:y,handleClose:O,onModalClick:f,onOpenAutoFocus:F,onCloseAutoFocus:D,onCloseRequested:N,onFocusoutPrevented:V}=us(n,u);He(Xe,{dialogRef:u,headerRef:i,bodyId:C,ns:m,rendered:c,style:h});const H=Ze(f),Y=T(()=>n.draggable&&!n.fullscreen);return o({visible:b,dialogContentRef:d}),(S,U)=>(k(),M(Ct,{to:"body",disabled:!S.appendToBody},[B(wt,{name:"dialog-fade",onAfterEnter:e(g),onAfterLeave:e($),onBeforeLeave:e(y),persisted:""},{default:R(()=>[ke(B(e(xt),{"custom-mask-event":"",mask:S.modal,"overlay-class":S.modalClass,"z-index":e(l)},{default:R(()=>[W("div",{role:"dialog","aria-modal":"true","aria-label":S.title||void 0,"aria-labelledby":S.title?void 0:e(v),"aria-describedby":e(C),class:w(`${e(m).namespace.value}-overlay-dialog`),style:te(e(a)),onClick:U[0]||(U[0]=(...q)=>e(H).onClick&&e(H).onClick(...q)),onMousedown:U[1]||(U[1]=(...q)=>e(H).onMousedown&&e(H).onMousedown(...q)),onMouseup:U[2]||(U[2]=(...q)=>e(H).onMouseup&&e(H).onMouseup(...q))},[B(e(ht),{loop:"",trapped:e(b),"focus-start-el":"container",onFocusAfterTrapped:e(F),onFocusAfterReleased:e(D),onFocusoutPrevented:e(V),onReleaseRequested:e(N)},{default:R(()=>[e(c)?(k(),M(as,we({key:0,ref_key:"dialogContentRef",ref:d},S.$attrs,{"custom-class":S.customClass,center:S.center,"align-center":S.alignCenter,"close-icon":S.closeIcon,draggable:e(Y),fullscreen:S.fullscreen,"show-close":S.showClose,title:S.title,onClose:e(O)}),Ce({header:R(()=>[S.$slots.title?_(S.$slots,"title",{key:1}):_(S.$slots,"header",{key:0,close:e(O),titleId:e(v),titleClass:e(m).e("title")})]),default:R(()=>[_(S.$slots,"default")]),_:2},[S.$slots.footer?{name:"footer",fn:R(()=>[_(S.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):P("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,is)]),_:3},8,["mask","overlay-class","z-index"]),[[kt,e(b)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var fs=oe(ds,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const io=ve(fs),ps=x({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:$t,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:t=>t===null||G(t)||["min","max"].includes(t),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:t=>t>=0&&t===Number.parseInt(`${t}`,10)},validateEvent:{type:Boolean,default:!0}}),ms={[We]:(t,o)=>o!==t,blur:t=>t instanceof FocusEvent,focus:t=>t instanceof FocusEvent,[pe]:t=>G(t)||ae(t),[ne]:t=>G(t)||ae(t)},vs=["aria-label","onKeydown"],ys=["aria-label","onKeydown"],bs=j({name:"ElInputNumber"}),gs=j({...bs,props:ps,emits:ms,setup(t,{expose:o,emit:n}){const s=t,{t:m}=Pe(),u=Q("input-number"),i=J(),d=Et({currentValue:s.modelValue,userInput:null}),{formItem:b}=St(),v=T(()=>G(s.modelValue)&&s.modelValue<=s.min),C=T(()=>G(s.modelValue)&&s.modelValue>=s.max),h=T(()=>{const r=y(s.step);return fe(s.precision)?Math.max(y(s.modelValue),r):(r>s.precision,s.precision)}),a=T(()=>s.controls&&s.controlsPosition==="right"),c=Nt(),l=ie(),g=T(()=>{if(d.userInput!==null)return d.userInput;let r=d.currentValue;if(ae(r))return"";if(G(r)){if(Number.isNaN(r))return"";fe(s.precision)||(r=r.toFixed(s.precision))}return r}),$=(r,p)=>{if(fe(p)&&(p=h.value),p===0)return Math.round(r);let E=String(r);const K=E.indexOf(".");if(K===-1||!E.replace(".","").split("")[K+p])return r;const ce=E.length;return E.charAt(ce-1)==="5"&&(E=`${E.slice(0,Math.max(0,ce-1))}6`),Number.parseFloat(Number(E).toFixed(p))},y=r=>{if(ae(r))return 0;const p=r.toString(),E=p.indexOf(".");let K=0;return E!==-1&&(K=p.length-E-1),K},O=(r,p=1)=>G(r)?$(r+s.step*p):d.currentValue,f=()=>{if(s.readonly||l.value||C.value)return;const r=Number(g.value)||0,p=O(r);N(p),n(pe,d.currentValue)},F=()=>{if(s.readonly||l.value||v.value)return;const r=Number(g.value)||0,p=O(r,-1);N(p),n(pe,d.currentValue)},D=(r,p)=>{const{max:E,min:K,step:z,precision:ee,stepStrictly:ce,valueOnClear:de}=s;let X=Number(r);if(ae(r)||Number.isNaN(X))return null;if(r===""){if(de===null)return null;X=$e(de)?{min:K,max:E}[de]:de}return ce&&(X=$(Math.round(X/z)*z,ee)),fe(ee)||(X=$(X,ee)),(X>E||X<K)&&(X=X>E?E:K,p&&n(ne,X)),X},N=(r,p=!0)=>{var E;const K=d.currentValue,z=D(r);if(K!==z){if(!p){n(ne,z);return}d.userInput=null,n(ne,z),n(We,z,K),s.validateEvent&&((E=b==null?void 0:b.validate)==null||E.call(b,"change").catch(ee=>Ee())),d.currentValue=z}},V=r=>{d.userInput=r;const p=r===""?null:Number(r);n(pe,p),N(p,!1)},H=r=>{const p=r!==""?Number(r):"";(G(p)&&!Number.isNaN(p)||r==="")&&N(p),d.userInput=null},Y=()=>{var r,p;(p=(r=i.value)==null?void 0:r.focus)==null||p.call(r)},S=()=>{var r,p;(p=(r=i.value)==null?void 0:r.blur)==null||p.call(r)},U=r=>{n("focus",r)},q=r=>{var p;n("blur",r),s.validateEvent&&((p=b==null?void 0:b.validate)==null||p.call(b,"blur").catch(E=>Ee()))};return re(()=>s.modelValue,r=>{const p=D(d.userInput),E=D(r,!0);!G(p)&&(!p||p!==E)&&(d.currentValue=E,d.userInput=null)},{immediate:!0}),Te(()=>{var r;const{min:p,max:E,modelValue:K}=s,z=(r=i.value)==null?void 0:r.input;if(z.setAttribute("role","spinbutton"),Number.isFinite(E)?z.setAttribute("aria-valuemax",String(E)):z.removeAttribute("aria-valuemax"),Number.isFinite(p)?z.setAttribute("aria-valuemin",String(p)):z.removeAttribute("aria-valuemin"),z.setAttribute("aria-valuenow",String(d.currentValue)),z.setAttribute("aria-disabled",String(l.value)),!G(K)&&K!=null){let ee=Number(K);Number.isNaN(ee)&&(ee=null),n(ne,ee)}}),It(()=>{var r;const p=(r=i.value)==null?void 0:r.input;p==null||p.setAttribute("aria-valuenow",`${d.currentValue}`)}),o({focus:Y,blur:S}),(r,p)=>(k(),L("div",{class:w([e(u).b(),e(u).m(e(c)),e(u).is("disabled",e(l)),e(u).is("without-controls",!r.controls),e(u).is("controls-right",e(a))]),onDragstart:p[0]||(p[0]=se(()=>{},["prevent"]))},[r.controls?ke((k(),L("span",{key:0,role:"button","aria-label":e(m)("el.inputNumber.decrease"),class:w([e(u).e("decrease"),e(u).is("disabled",e(v))]),onKeydown:le(F,["enter"])},[B(e(Z),null,{default:R(()=>[e(a)?(k(),M(e(Tt),{key:0})):(k(),M(e(Pt),{key:1}))]),_:1})],42,vs)),[[e(De),F]]):P("v-if",!0),r.controls?ke((k(),L("span",{key:1,role:"button","aria-label":e(m)("el.inputNumber.increase"),class:w([e(u).e("increase"),e(u).is("disabled",e(C))]),onKeydown:le(f,["enter"])},[B(e(Z),null,{default:R(()=>[e(a)?(k(),M(e(Ft),{key:0})):(k(),M(e(_t),{key:1}))]),_:1})],42,ys)),[[e(De),f]]):P("v-if",!0),B(e(qt),{id:r.id,ref_key:"input",ref:i,type:"number",step:r.step,"model-value":e(g),placeholder:r.placeholder,readonly:r.readonly,disabled:e(l),size:e(c),max:r.max,min:r.min,name:r.name,label:r.label,"validate-event":!1,onKeydown:[le(se(f,["prevent"]),["up"]),le(se(F,["prevent"]),["down"])],onBlur:q,onFocus:U,onInput:V,onChange:H},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","label","onKeydown"])],34))}});var hs=oe(gs,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const co=ve(hs),ks=x({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:t=>t>=0&&t<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:I(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:I([String,Array,Function]),default:""},format:{type:I(Function),default:t=>`${t}%`}}),ws=["aria-valuenow"],Cs={viewBox:"0 0 100 100"},$s=["d","stroke","stroke-width"],Es=["d","stroke","opacity","stroke-linecap","stroke-width"],Ss={key:0},Ns=j({name:"ElProgress"}),Is=j({...Ns,props:ks,setup(t){const o=t,n={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},s=Q("progress"),m=T(()=>({width:`${o.percentage}%`,animationDuration:`${o.duration}s`,backgroundColor:O(o.percentage)})),u=T(()=>(o.strokeWidth/o.width*100).toFixed(1)),i=T(()=>["circle","dashboard"].includes(o.type)?Number.parseInt(`${50-Number.parseFloat(u.value)/2}`,10):0),d=T(()=>{const f=i.value,F=o.type==="dashboard";return`
          M 50 50
          m 0 ${F?"":"-"}${f}
          a ${f} ${f} 0 1 1 0 ${F?"-":""}${f*2}
          a ${f} ${f} 0 1 1 0 ${F?"":"-"}${f*2}
          `}),b=T(()=>2*Math.PI*i.value),v=T(()=>o.type==="dashboard"?.75:1),C=T(()=>`${-1*b.value*(1-v.value)/2}px`),h=T(()=>({strokeDasharray:`${b.value*v.value}px, ${b.value}px`,strokeDashoffset:C.value})),a=T(()=>({strokeDasharray:`${b.value*v.value*(o.percentage/100)}px, ${b.value}px`,strokeDashoffset:C.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),c=T(()=>{let f;return o.color?f=O(o.percentage):f=n[o.status]||n.default,f}),l=T(()=>o.status==="warning"?Lt:o.type==="line"?o.status==="success"?Ke:Rt:o.status==="success"?qe:Ye),g=T(()=>o.type==="line"?12+o.strokeWidth*.4:o.width*.111111+2),$=T(()=>o.format(o.percentage));function y(f){const F=100/f.length;return f.map((N,V)=>$e(N)?{color:N,percentage:(V+1)*F}:N).sort((N,V)=>N.percentage-V.percentage)}const O=f=>{var F;const{color:D}=o;if(ge(D))return D(f);if($e(D))return D;{const N=y(D);for(const V of N)if(V.percentage>f)return V.color;return(F=N[N.length-1])==null?void 0:F.color}};return(f,F)=>(k(),L("div",{class:w([e(s).b(),e(s).m(f.type),e(s).is(f.status),{[e(s).m("without-text")]:!f.showText,[e(s).m("text-inside")]:f.textInside}]),role:"progressbar","aria-valuenow":f.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[f.type==="line"?(k(),L("div",{key:0,class:w(e(s).b("bar"))},[W("div",{class:w(e(s).be("bar","outer")),style:te({height:`${f.strokeWidth}px`})},[W("div",{class:w([e(s).be("bar","inner"),{[e(s).bem("bar","inner","indeterminate")]:f.indeterminate}]),style:te(e(m))},[(f.showText||f.$slots.default)&&f.textInside?(k(),L("div",{key:0,class:w(e(s).be("bar","innerText"))},[_(f.$slots,"default",{percentage:f.percentage},()=>[W("span",null,ue(e($)),1)])],2)):P("v-if",!0)],6)],6)],2)):(k(),L("div",{key:1,class:w(e(s).b("circle")),style:te({height:`${f.width}px`,width:`${f.width}px`})},[(k(),L("svg",Cs,[W("path",{class:w(e(s).be("circle","track")),d:e(d),stroke:`var(${e(s).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-width":e(u),fill:"none",style:te(e(h))},null,14,$s),W("path",{class:w(e(s).be("circle","path")),d:e(d),stroke:e(c),fill:"none",opacity:f.percentage?1:0,"stroke-linecap":f.strokeLinecap,"stroke-width":e(u),style:te(e(a))},null,14,Es)]))],6)),(f.showText||f.$slots.default)&&!f.textInside?(k(),L("div",{key:2,class:w(e(s).e("text")),style:te({fontSize:`${e(g)}px`})},[_(f.$slots,"default",{percentage:f.percentage},()=>[f.status?(k(),M(e(Z),{key:1},{default:R(()=>[(k(),M(ze(e(l))))]),_:1})):(k(),L("span",Ss,ue(e($)),1))])],6)):P("v-if",!0)],10,ws))}});var Ts=oe(Is,[["__file","/home/runner/work/element-plus/element-plus/packages/components/progress/src/progress.vue"]]);const Ps=ve(Ts),Fs="ElUpload";class _s extends Error{constructor(o,n,s,m){super(o),this.name="UploadAjaxError",this.status=n,this.method=s,this.url=m}}function Ae(t,o,n){let s;return n.response?s=`${n.response.error||n.response}`:n.responseText?s=`${n.responseText}`:s=`fail to ${o.method} ${t} ${n.status}`,new _s(s,n.status,o.method,t)}function Ls(t){const o=t.responseText||t.response;if(!o)return o;try{return JSON.parse(o)}catch{return o}}const Rs=t=>{typeof XMLHttpRequest>"u"&&me(Fs,"XMLHttpRequest is undefined");const o=new XMLHttpRequest,n=t.action;o.upload&&o.upload.addEventListener("progress",u=>{const i=u;i.percent=u.total>0?u.loaded/u.total*100:0,t.onProgress(i)});const s=new FormData;if(t.data)for(const[u,i]of Object.entries(t.data))Array.isArray(i)?s.append(u,...i):s.append(u,i);s.append(t.filename,t.file,t.file.name),o.addEventListener("error",()=>{t.onError(Ae(n,t,o))}),o.addEventListener("load",()=>{if(o.status<200||o.status>=300)return t.onError(Ae(n,t,o));t.onSuccess(Ls(o))}),o.open(t.method,n,!0),t.withCredentials&&"withCredentials"in o&&(o.withCredentials=!0);const m=t.headers||{};if(m instanceof Headers)m.forEach((u,i)=>o.setRequestHeader(i,u));else for(const[u,i]of Object.entries(m))ae(i)||o.setRequestHeader(u,String(i));return o.send(s),o},Qe=["text","picture","picture-card"];let Ds=1;const Ie=()=>Date.now()+Ds++,xe=x({action:{type:String,default:"#"},headers:{type:I(Object)},method:{type:String,default:"post"},data:{type:Object,default:()=>Se({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},type:{type:String,default:"select"},fileList:{type:I(Array),default:()=>Se([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:Qe,default:"text"},httpRequest:{type:I(Function),default:Rs},disabled:Boolean,limit:Number}),As=x({...xe,beforeUpload:{type:I(Function),default:A},beforeRemove:{type:I(Function)},onRemove:{type:I(Function),default:A},onChange:{type:I(Function),default:A},onPreview:{type:I(Function),default:A},onSuccess:{type:I(Function),default:A},onProgress:{type:I(Function),default:A},onError:{type:I(Function),default:A},onExceed:{type:I(Function),default:A}}),Bs=x({files:{type:I(Array),default:()=>Se([])},disabled:{type:Boolean,default:!1},handlePreview:{type:I(Function),default:A},listType:{type:String,values:Qe,default:"text"}}),Ms={remove:t=>!!t},Os=["onKeydown"],Vs=["src"],Us=["onClick"],zs=["onClick"],js=["onClick"],Hs=j({name:"ElUploadList"}),Ks=j({...Hs,props:Bs,emits:Ms,setup(t,{emit:o}){const{t:n}=Pe(),s=Q("upload"),m=Q("icon"),u=Q("list"),i=ie(),d=J(!1),b=v=>{o("remove",v)};return(v,C)=>(k(),M(Vt,{tag:"ul",class:w([e(s).b("list"),e(s).bm("list",v.listType),e(s).is("disabled",e(i))]),name:e(u).b()},{default:R(()=>[(k(!0),L(Dt,null,At(v.files,h=>(k(),L("li",{key:h.uid||h.name,class:w([e(s).be("list","item"),e(s).is(h.status),{focusing:d.value}]),tabindex:"0",onKeydown:le(a=>!e(i)&&b(h),["delete"]),onFocus:C[0]||(C[0]=a=>d.value=!0),onBlur:C[1]||(C[1]=a=>d.value=!1),onClick:C[2]||(C[2]=a=>d.value=!1)},[_(v.$slots,"default",{file:h},()=>[v.listType==="picture"||h.status!=="uploading"&&v.listType==="picture-card"?(k(),L("img",{key:0,class:w(e(s).be("list","item-thumbnail")),src:h.url,alt:""},null,10,Vs)):P("v-if",!0),h.status==="uploading"||v.listType!=="picture-card"?(k(),L("div",{key:1,class:w(e(s).be("list","item-info"))},[W("a",{class:w(e(s).be("list","item-name")),onClick:se(a=>v.handlePreview(h),["prevent"])},[B(e(Z),{class:w(e(m).m("document"))},{default:R(()=>[B(e(Bt))]),_:1},8,["class"]),W("span",{class:w(e(s).be("list","item-file-name"))},ue(h.name),3)],10,Us),h.status==="uploading"?(k(),M(e(Ps),{key:0,type:v.listType==="picture-card"?"circle":"line","stroke-width":v.listType==="picture-card"?6:2,percentage:Number(h.percentage),style:te(v.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):P("v-if",!0)],2)):P("v-if",!0),W("label",{class:w(e(s).be("list","item-status-label"))},[v.listType==="text"?(k(),M(e(Z),{key:0,class:w([e(m).m("upload-success"),e(m).m("circle-check")])},{default:R(()=>[B(e(Ke))]),_:1},8,["class"])):["picture-card","picture"].includes(v.listType)?(k(),M(e(Z),{key:1,class:w([e(m).m("upload-success"),e(m).m("check")])},{default:R(()=>[B(e(qe))]),_:1},8,["class"])):P("v-if",!0)],2),e(i)?P("v-if",!0):(k(),M(e(Z),{key:2,class:w(e(m).m("close")),onClick:a=>b(h)},{default:R(()=>[B(e(Ye))]),_:2},1032,["class","onClick"])),P(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),P(" This is a bug which needs to be fixed "),P(" TODO: Fix the incorrect navigation interaction "),e(i)?P("v-if",!0):(k(),L("i",{key:3,class:w(e(m).m("close-tip"))},ue(e(n)("el.upload.deleteTip")),3)),v.listType==="picture-card"?(k(),L("span",{key:4,class:w(e(s).be("list","item-actions"))},[W("span",{class:w(e(s).be("list","item-preview")),onClick:a=>v.handlePreview(h)},[B(e(Z),{class:w(e(m).m("zoom-in"))},{default:R(()=>[B(e(Mt))]),_:1},8,["class"])],10,zs),e(i)?P("v-if",!0):(k(),L("span",{key:0,class:w(e(s).be("list","item-delete")),onClick:a=>b(h)},[B(e(Z),{class:w(e(m).m("delete"))},{default:R(()=>[B(e(Ot))]),_:1},8,["class"])],10,js))],2)):P("v-if",!0)])],42,Os))),128)),_(v.$slots,"append")]),_:3},8,["class","name"]))}});var Be=oe(Ks,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-list.vue"]]);const qs=x({disabled:{type:Boolean,default:!1}}),Ys={file:t=>Ut(t)},Ws=["onDrop","onDragover"],et="ElUploadDrag",Xs=j({name:et}),Gs=j({...Xs,props:qs,emits:Ys,setup(t,{emit:o}){const n=he(Ge);n||me(et,"usage: <el-upload><el-upload-dragger /></el-upload>");const s=Q("upload"),m=J(!1),u=ie(),i=b=>{if(u.value)return;m.value=!1,b.stopPropagation();const v=Array.from(b.dataTransfer.files),C=n.accept.value;if(!C){o("file",v);return}const h=v.filter(a=>{const{type:c,name:l}=a,g=l.includes(".")?`.${l.split(".").pop()}`:"",$=c.replace(/\/.*$/,"");return C.split(",").map(y=>y.trim()).filter(y=>y).some(y=>y.startsWith(".")?g===y:/\/\*$/.test(y)?$===y.replace(/\/\*$/,""):/^[^/]+\/[^/]+$/.test(y)?c===y:!1)});o("file",h)},d=()=>{u.value||(m.value=!0)};return(b,v)=>(k(),L("div",{class:w([e(s).b("dragger"),e(s).is("dragover",m.value)]),onDrop:se(i,["prevent"]),onDragover:se(d,["prevent"]),onDragleave:v[0]||(v[0]=se(C=>m.value=!1,["prevent"]))},[_(b.$slots,"default")],42,Ws))}});var Zs=oe(Gs,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-dragger.vue"]]);const Js=x({...xe,beforeUpload:{type:I(Function),default:A},onRemove:{type:I(Function),default:A},onStart:{type:I(Function),default:A},onSuccess:{type:I(Function),default:A},onProgress:{type:I(Function),default:A},onError:{type:I(Function),default:A},onExceed:{type:I(Function),default:A}}),Qs=["onKeydown"],xs=["name","multiple","accept"],eo=j({name:"ElUploadContent",inheritAttrs:!1}),to=j({...eo,props:Js,setup(t,{expose:o}){const n=t,s=Q("upload"),m=ie(),u=Ne({}),i=Ne(),d=l=>{if(l.length===0)return;const{autoUpload:g,limit:$,fileList:y,multiple:O,onStart:f,onExceed:F}=n;if($&&y.length+l.length>$){F(l,y);return}O||(l=l.slice(0,1));for(const D of l){const N=D;N.uid=Ie(),f(N),g&&b(N)}},b=async l=>{if(i.value.value="",!n.beforeUpload)return v(l);let g;try{g=await n.beforeUpload(l)}catch{g=!1}if(g===!1){n.onRemove(l);return}let $=l;g instanceof Blob&&(g instanceof File?$=g:$=new File([g],l.name,{type:l.type})),v(Object.assign($,{uid:l.uid}))},v=l=>{const{headers:g,data:$,method:y,withCredentials:O,name:f,action:F,onProgress:D,onSuccess:N,onError:V,httpRequest:H}=n,{uid:Y}=l,S={headers:g||{},withCredentials:O,file:l,data:$,method:y,filename:f,action:F,onProgress:q=>{D(q,l)},onSuccess:q=>{N(q,l),delete u.value[Y]},onError:q=>{V(q,l),delete u.value[Y]}},U=H(S);u.value[Y]=U,U instanceof Promise&&U.then(S.onSuccess,S.onError)},C=l=>{const g=l.target.files;g&&d(Array.from(g))},h=()=>{m.value||(i.value.value="",i.value.click())},a=()=>{h()};return o({abort:l=>{zt(u.value).filter(l?([$])=>String(l.uid)===$:()=>!0).forEach(([$,y])=>{y instanceof XMLHttpRequest&&y.abort(),delete u.value[$]})},upload:b}),(l,g)=>(k(),L("div",{class:w([e(s).b(),e(s).m(l.listType),e(s).is("drag",l.drag)]),tabindex:"0",onClick:h,onKeydown:le(se(a,["self"]),["enter","space"])},[l.drag?(k(),M(Zs,{key:0,disabled:e(m),onFile:d},{default:R(()=>[_(l.$slots,"default")]),_:3},8,["disabled"])):_(l.$slots,"default",{key:1}),W("input",{ref_key:"inputRef",ref:i,class:w(e(s).e("input")),name:l.name,multiple:l.multiple,accept:l.accept,type:"file",onChange:C,onClick:g[0]||(g[0]=se(()=>{},["stop"]))},null,42,xs)],42,Qs))}});var Me=oe(to,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-content.vue"]]);const Oe="ElUpload",so=t=>{var o;(o=t.url)!=null&&o.startsWith("blob:")&&URL.revokeObjectURL(t.url)},oo=(t,o)=>{const n=jt(t,"fileList",void 0,{passive:!0}),s=a=>n.value.find(c=>c.uid===a.uid);function m(a){var c;(c=o.value)==null||c.abort(a)}function u(a=["ready","uploading","success","fail"]){n.value=n.value.filter(c=>!a.includes(c.status))}const i=(a,c)=>{const l=s(c);l&&(l.status="fail",n.value.splice(n.value.indexOf(l),1),t.onError(a,l,n.value),t.onChange(l,n.value))},d=(a,c)=>{const l=s(c);l&&(t.onProgress(a,l,n.value),l.status="uploading",l.percentage=Math.round(a.percent))},b=(a,c)=>{const l=s(c);l&&(l.status="success",l.response=a,t.onSuccess(a,l,n.value),t.onChange(l,n.value))},v=a=>{ae(a.uid)&&(a.uid=Ie());const c={name:a.name,percentage:0,status:"ready",size:a.size,raw:a,uid:a.uid};if(t.listType==="picture-card"||t.listType==="picture")try{c.url=URL.createObjectURL(a)}catch(l){Ee(Oe,l.message),t.onError(l,c,n.value)}n.value=[...n.value,c],t.onChange(c,n.value)},C=async a=>{const c=a instanceof File?s(a):a;c||me(Oe,"file to be removed not found");const l=g=>{m(g);const $=n.value;$.splice($.indexOf(g),1),t.onRemove(g,$),so(g)};t.beforeRemove?await t.beforeRemove(c,n.value)!==!1&&l(c):l(c)};function h(){n.value.filter(({status:a})=>a==="ready").forEach(({raw:a})=>{var c;return a&&((c=o.value)==null?void 0:c.upload(a))})}return re(()=>t.listType,a=>{a!=="picture-card"&&a!=="picture"||(n.value=n.value.map(c=>{const{raw:l,url:g}=c;if(!g&&l)try{c.url=URL.createObjectURL(l)}catch($){t.onError($,c,n.value)}return c}))}),re(n,a=>{for(const c of a)c.uid||(c.uid=Ie()),c.status||(c.status="success")},{immediate:!0,deep:!0}),{uploadFiles:n,abort:m,clearFiles:u,handleError:i,handleProgress:d,handleStart:v,handleSuccess:b,handleRemove:C,submit:h}},no=j({name:"ElUpload"}),ao=j({...no,props:As,setup(t,{expose:o}){const n=t,s=je(),m=ie(),u=Ne(),{abort:i,submit:d,clearFiles:b,uploadFiles:v,handleStart:C,handleError:h,handleRemove:a,handleSuccess:c,handleProgress:l}=oo(n,u),g=T(()=>n.listType==="picture-card"),$=T(()=>({...n,fileList:v.value,onStart:C,onProgress:l,onSuccess:c,onError:h,onRemove:a}));return Ve(()=>{v.value.forEach(({url:y})=>{y!=null&&y.startsWith("blob:")&&URL.revokeObjectURL(y)})}),He(Ge,{accept:Ht(n,"accept")}),o({abort:i,submit:d,clearFiles:b,handleStart:C,handleRemove:a}),(y,O)=>(k(),L("div",null,[e(g)&&y.showFileList?(k(),M(Be,{key:0,disabled:e(m),"list-type":y.listType,files:e(v),"handle-preview":y.onPreview,onRemove:e(a)},Ce({append:R(()=>[B(Me,we({ref_key:"uploadRef",ref:u},e($)),{default:R(()=>[e(s).trigger?_(y.$slots,"trigger",{key:0}):P("v-if",!0),!e(s).trigger&&e(s).default?_(y.$slots,"default",{key:1}):P("v-if",!0)]),_:3},16)]),_:2},[y.$slots.file?{name:"default",fn:R(({file:f})=>[_(y.$slots,"file",{file:f})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):P("v-if",!0),!e(g)||e(g)&&!y.showFileList?(k(),M(Me,we({key:1,ref_key:"uploadRef",ref:u},e($)),{default:R(()=>[e(s).trigger?_(y.$slots,"trigger",{key:0}):P("v-if",!0),!e(s).trigger&&e(s).default?_(y.$slots,"default",{key:1}):P("v-if",!0)]),_:3},16)):P("v-if",!0),y.$slots.trigger?_(y.$slots,"default",{key:2}):P("v-if",!0),_(y.$slots,"tip"),!e(g)&&y.showFileList?(k(),M(Be,{key:3,disabled:e(m),"list-type":y.listType,files:e(v),"handle-preview":y.onPreview,onRemove:e(a)},Ce({_:2},[y.$slots.file?{name:"default",fn:R(({file:f})=>[_(y.$slots,"file",{file:f})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):P("v-if",!0)]))}});var lo=oe(ao,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload.vue"]]);const fo=ve(lo);export{io as E,co as a,fo as b};
