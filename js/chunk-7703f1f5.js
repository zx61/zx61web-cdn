import{e as ee,u as ge,s as m,D as T,G as Z,r as ke,o as g,c as Q,b as _,t as i,g as u,i as o,w as s,l as p,q as ye,H as Te,I as we,k as Ne,F as L,h as $,v as A,J as Ee,E as Ve,_ as Ce}from"./chunk-4aa116ce.js";import{E as xe,q as Be,a as Ue,t as De,g as He,b as Qe,c as Se,d as Ie,e as qe}from"./chunk-560c3d5f.js";/* empty css              */import{l as J,c as C,i as Fe,j as Le,k as $e,t as x,u as B,h as U,o as Ae,q as Re,r as Me,s as Oe}from"./chunk-bdcf9dd7.js";import{b as Ye,E as je,a as ze}from"./chunk-d488a445.js";const Pe={class:"batchQueryBalance"},Ge={class:"text_markedness"},Je={class:"dialog-footer"},We={class:"dialog-footer"},Ke={class:"buttons"},Xe={class:"text_markedness",style:{display:"flex"}},Ze={class:"text_markedness"},el={class:"table"},ll={class:"dialog-footer"},al={class:"el-upload__text"},tl=ee({name:"batchQueryBalance"}),ol=ee({...tl,setup(nl){const{t:a}=ge(),R=ye(),S=m(!1),I=m(!1),q=m(!1),b=m(!1),f=m(!0),k=m(""),E=m(""),w=m(""),M=m(0),O=m(1),F=T([]),d=T([]),Y=T([]),j=m(),V=T([{label:C.ETH,value:C.ETH}]),D=T([{label:x.ETH,value:x.ETH}]),N=T({ETH:C.ETH}),W=T({}),t=T({chainName:C.ETH,tokens:[C.ETH],network:x.ETH,threadCount:1}),z=R.currentRoute.value.query.chain;if(z){let n=!1;for(let e=0;e<J.length;e++)if(J[e].value.toString().toUpperCase()==z.toString().toUpperCase()){t.chainName=z.toString().toUpperCase(),n=!0;break}n||R.push({query:{chain:C.ETH}})}Z(()=>t.chainName,()=>{R.push({query:{chain:t.chainName}}),V.length=0,V.push({label:B[t.chainName],value:B[t.chainName]}),D.length=0,D.push({label:x[t.chainName],value:x[t.chainName]}),t.network=x[t.chainName],t.tokens=[B[t.chainName]],N[B[t.chainName]]=B[t.chainName]}),Z(()=>({...d}),()=>{K.value=Math.ceil(d.length/100),X()});const K=m(1),P=m(1),X=()=>{Y.length=0,Y.push(...d.slice((P.value-1)*100,P.value*100))},le=n=>{P.value=n,X()},ae=()=>{F.length=0,t.tokens.forEach(n=>{F.push({label:N[n],prop:N[n]+"Balance"})})},te=async()=>{b.value=!0;try{D.forEach(n=>{if(n.value==E.value)throw U.warning(a("chainTools.networkReuse")),b.value=!1,new Error(a("chainTools.networkReuse"))})}catch(n){return n}await De(E.value)?(I.value=!1,D.push({label:E.value,value:E.value})):U.error(a("chainTools.networkError")),b.value=!1},oe=async()=>{b.value=!0;try{V.forEach(e=>{if(e.value==k.value)throw U.warning(a("chainTools.tokenReuse")),b.value=!1,new Error(a("chainTools.tokenReuse"))})}catch(e){return e}let n=await He(t.chainName,t.network,k.value);n?(S.value=!1,V.forEach(e=>{e.label==n&&(n=n+"1")}),V.push({label:n,value:k.value}),N[k.value]=n,W[k.value]=await Qe(t.chainName,t.network,k.value)):U.error(a("chainTools.tokenError")),b.value=!1},ne=()=>{if(b.value=!0,w.value=w.value.trim(),w.value==""){U.warning(a("chainTools.noAddressTip")),b.value=!1;return}d.length=0,w.value.split(`
`).forEach((e,r)=>{e.trim()!=""&&d.push({serialNumber:(r+1).toString(),address:e.split("----")[0],status:a("chainTools.waitQuery")})}),q.value=!1,b.value=!1},se=async()=>{if(d.length==0||t.tokens.length==0)return;M.value=0,f.value=!1,ae(),d.splice(0,O.value-1);let n=0;const e=async()=>{if(f.value)return;const r=n++;if(r<d.length){const v=d[r];d[r].status=a("chainTools.inQuery");for(let h=0;h<t.tokens.length;h++){const c=t.tokens[h];let y;c==B[t.chainName]?y=await Be(t.chainName,t.network,v.address):y=await Ue(t.chainName,t.network,c,v.address,W[c]),d[r][N[c]+"Balance"]=y,h+1==F.length&&(d[r].status=a("chainTools.finishQuery"),M.value++,r+1==d.length&&(U.success(a("chainTools.finishQuery")),f.value=!0))}e()}};for(let r=0;r<t.threadCount;r++)setTimeout(e,100)},ue=()=>{const n=Te(we(),"YYYYMMDDHHmmss"),e=d.map(r=>{let v=r.address;return t.tokens.forEach(h=>{v+="----"+N[h]+":"+r[N[h]+"Balance"]}),v}).join(`\r
`);try{Fe.saveAs(new Blob([e],{type:"text/plain;charset=utf-8"}),a("chainTools.fileName1")+t.chainName+a("chainTools.fileName3")+n.value+".txt")}catch{}return e},re=n=>{d.splice(n,1)},ie=n=>{const e=new FileReader;e.readAsText(n.raw,"UTF-8"),e.onload=function(r){var v;(v=r.target)!=null&&v.result&&(w.value=r.target.result.toString())}},de=n=>{j.value.clearFiles();const e=n[0];e.uid=Se(),j.value.handleStart(e)};return(n,e)=>{const r=Ae,v=Re,h=ze,c=Ne,y=Ye,G=xe,ce=Ie,me=je,pe=Me,be=Le,H=Oe,fe=$e,ve=ke("upload-filled"),he=Ve,_e=qe;return g(),Q("div",Pe,[_("h1",null,i(u(a)("chainTools.bathQueryWallet")),1),_("div",Ge,i(u(a)("chainTools.queryTip")),1),o(me,{inline:!0,model:t,class:"batchQueryBalanceForm"},{default:s(()=>[o(h,{label:u(a)("chainTools.chainNameLabel")},{default:s(()=>[o(v,{modelValue:t.chainName,"onUpdate:modelValue":e[0]||(e[0]=l=>t.chainName=l),class:"shortSelect",disabled:!f.value},{default:s(()=>[(g(!0),Q(L,null,$(u(J),l=>(g(),A(r,{value:l.value,label:l.label,disabled:l.balanceDisable||l.disabled},null,8,["value","label","disabled"]))),256))]),_:1},8,["modelValue","disabled"])]),_:1},8,["label"]),o(h,{label:u(a)("chainTools.networkLabel")},{default:s(()=>[o(v,{disabled:!f.value,modelValue:t.network,"onUpdate:modelValue":e[1]||(e[1]=l=>t.network=l)},{default:s(()=>[(g(!0),Q(L,null,$(D,l=>(g(),A(r,{value:l.value,label:l.label,disabled:l.disabled},null,8,["value","label","disabled"]))),256))]),_:1},8,["disabled","modelValue"]),o(c,{disabled:!f.value,type:"primary",onClick:e[2]||(e[2]=l=>I.value=!0)},{default:s(()=>[p(i(u(a)("chainTools.selfDefinedNetwork")),1)]),_:1},8,["disabled"]),o(G,{"destroy-on-close":"",title:u(a)("chainTools.addNetworkLabel"),"align-center":"",modelValue:I.value,"onUpdate:modelValue":e[5]||(e[5]=l=>I.value=l)},{footer:s(()=>[_("span",Je,[o(c,{type:"primary",onClick:e[4]||(e[4]=l=>te()),disabled:b.value},{default:s(()=>[p(i(u(a)("utils.confirm")),1)]),_:1},8,["disabled"])])]),default:s(()=>[o(y,{class:"longInput",modelValue:E.value,"onUpdate:modelValue":e[3]||(e[3]=l=>E.value=l)},null,8,["modelValue"])]),_:1},8,["title","modelValue"])]),_:1},8,["label"]),o(h,{label:u(a)("chainTools.tokenLabel")},{default:s(()=>[o(v,{disabled:!f.value,multiple:"",modelValue:t.tokens,"onUpdate:modelValue":e[6]||(e[6]=l=>t.tokens=l)},{default:s(()=>[(g(!0),Q(L,null,$(V,l=>(g(),A(r,{value:l.value,label:l.label,disabled:l.disabled},null,8,["value","label","disabled"]))),256))]),_:1},8,["disabled","modelValue"]),o(c,{disabled:!f.value,type:"primary",onClick:e[7]||(e[7]=l=>S.value=!0)},{default:s(()=>[p(i(u(a)("chainTools.selfDefinedToken")),1)]),_:1},8,["disabled"]),o(G,{"destroy-on-close":"",title:u(a)("chainTools.addTokenLabel"),"align-center":"",modelValue:S.value,"onUpdate:modelValue":e[10]||(e[10]=l=>S.value=l)},{footer:s(()=>[_("span",We,[o(c,{type:"primary",onClick:e[9]||(e[9]=l=>oe()),disabled:b.value},{default:s(()=>[p(i(u(a)("utils.confirm")),1)]),_:1},8,["disabled"])])]),default:s(()=>[o(y,{class:"longInput",modelValue:k.value,"onUpdate:modelValue":e[8]||(e[8]=l=>k.value=l)},null,8,["modelValue"])]),_:1},8,["title","modelValue"])]),_:1},8,["label"]),o(h,{label:u(a)("utils.threadLabel")},{default:s(()=>[o(ce,{disabled:!f.value,modelValue:t.threadCount,"onUpdate:modelValue":e[11]||(e[11]=l=>t.threadCount=l),min:1},null,8,["disabled","modelValue"])]),_:1},8,["label"])]),_:1},8,["model"]),_("div",Ke,[o(c,{disabled:!f.value,type:"info",onClick:e[12]||(e[12]=l=>q.value=!0)},{default:s(()=>[p(i(u(a)("chainTools.importAddress")),1)]),_:1},8,["disabled"]),o(c,{type:"primary",onClick:e[13]||(e[13]=l=>se())},{default:s(()=>[p(i(u(a)("chainTools.startQuery")),1)]),_:1}),o(c,{type:"warning",onClick:e[14]||(e[14]=l=>f.value=!0)},{default:s(()=>[p(i(u(a)("chainTools.stopQuery")),1)]),_:1}),o(c,{type:"primary",onClick:e[15]||(e[15]=l=>ue())},{default:s(()=>[p(i(u(a)("chainTools.dowmLoadTable")),1)]),_:1}),_("div",Xe,[p(i(u(a)("utils.startSerialNumber"))+" ",1),o(y,{modelValue:O.value,"onUpdate:modelValue":e[16]||(e[16]=l=>O.value=l),disabled:!f.value},null,8,["modelValue","disabled"])]),_("div",Ze,i(u(a)("chainTools.finishQueryCountLabbel"))+" "+i(M.value),1)]),_("div",el,[o(be,{target:".batchQueryBalance",offset:80},{default:s(()=>[o(pe,{layout:"->,prev, pager, next","page-count":K.value,background:"",onCurrentChange:le,"hide-on-single-page":!0},null,8,["page-count"])]),_:1}),o(fe,{data:Y,size:"small","max-height":"500"},{default:s(()=>[o(H,{prop:"serialNumber",label:u(a)("utils.serialNumber"),width:"60"},null,8,["label"]),o(H,{prop:"address",label:u(a)("chainTools.address")},null,8,["label"]),(g(!0),Q(L,null,$(F,l=>(g(),A(H,{prop:l.prop,sortable:"",label:l.label},null,8,["prop","label"]))),256)),o(H,{prop:"status",label:u(a)("utils.status"),width:"100"},null,8,["label"]),o(H,{label:u(a)("utils.operation"),fixed:"right",width:"100"},{default:s(l=>[o(c,{link:"",type:"primary",size:"small",onClick:Ee(sl=>re(l.$index),["prevent"])},{default:s(()=>[p(i(u(a)("utils.delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])]),o(G,{"destroy-on-close":"",title:u(a)("chainTools.importAddressLabel"),"align-center":"",modelValue:q.value,"onUpdate:modelValue":e[19]||(e[19]=l=>q.value=l)},{footer:s(()=>[_("span",ll,[o(_e,{drag:"",ref_key:"upload",ref:j,limit:1,"auto-upload":!1,"on-change":ie,"on-exceed":de},{default:s(()=>[o(he,{class:"el-icon--upload"},{default:s(()=>[o(ve)]),_:1}),_("div",al,[p(i(u(a)("utils.dragToHere"))+" or ",1),_("em",null,i(u(a)("utils.clickToUpload")),1),p("Â eg: address---- or address ")])]),_:1},512),o(c,{type:"primary",onClick:e[18]||(e[18]=l=>ne()),disabled:b.value},{default:s(()=>[p(i(u(a)("utils.confirm")),1)]),_:1},8,["disabled"])])]),default:s(()=>[o(y,{class:"longInput",type:"textarea",rows:10,modelValue:w.value,"onUpdate:modelValue":e[17]||(e[17]=l=>w.value=l),placeholder:"eg: address---- or address"},null,8,["modelValue"])]),_:1},8,["title","modelValue"])])}}});const ml=Ce(ol,[["__scopeId","data-v-b6f500dc"]]);export{ml as default};
