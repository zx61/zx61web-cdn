import{d as le,v as ke,h as Te,r as m,e as y,P as C,U as x,S as G,T as ee,C as ye,o as g,c as B,b as h,t as i,f as s,g as o,w as n,F as A,l as q,j as R,k as p,V as we,W as U,E as S,z as Ne,L as Ee,_ as Ve}from"./chunk-DumNPkiB.js";import{t as Ce,g as xe,a as Ue,b as Se,E as Qe,c as Be,q as De,d as He}from"./chunk-DnBhD7pW.js";import{E as Ie,a as Le}from"./chunk-xCeqlN58.js";import"./chunk-DCOt1Y1-.js";import"./chunk--clNN278.js";import{u as Fe,d as $e,f as Ae,E as qe,e as Re}from"./chunk-uLsikmwE.js";import{E as Me}from"./chunk-CvpxcwE2.js";import{E as Oe,a as Ye}from"./chunk-DIE94-Aa.js";import{a as je,E as Pe}from"./chunk-xnyBsVKP.js";import{E as ze}from"./chunk-CdEpYxD9.js";import"./chunk-BB_Ol6Sd.js";import"./chunk-CKVFr5AM.js";import"./chunk-CPlpCXK6.js";import"./chunk-B-QNX2j5.js";import"./chunk-CiGKEyJT.js";import"./chunk-C1AEa5pm.js";import"./chunk-DSKVg-N-.js";import"./chunk-DwntrAUn.js";import"./chunk-TDtrdbi3.js";const We={class:"batchQueryBalance"},Ge={class:"text_markedness"},Je={class:"dialog-footer"},Ke={class:"dialog-footer"},Xe={class:"buttons"},Ze={class:"text_markedness",style:{display:"flex"}},el={class:"text_markedness"},ll={class:"table"},al={class:"dialog-footer"},tl={class:"el-upload__text"},ol=le({name:"batchQueryBalance"}),nl=le({...ol,setup(sl){const{t:a}=ke.useI18n(),M=Te(),D=m(!1),H=m(!1),I=m(!1),f=m(!1),b=m(!0),k=m(""),N=m(""),w=m(""),O=m(0),Y=m(1),L=y([]),d=y([]),j=y([]),P=m(),E=y([{label:C.ETH,value:C.ETH}]),V=y([{label:x.ETH,value:x.ETH}]),F=y({ETH:C.ETH}),J=y({}),t=y({chainName:C.ETH,tokens:[C.ETH],network:x.ETH,threadCount:1}),K=()=>{E.length=0,E.push({label:U[t.chainName],value:U[t.chainName]}),V.length=0,V.push({label:x[t.chainName],value:x[t.chainName]}),t.network=x[t.chainName],t.tokens=[U[t.chainName]],F[U[t.chainName]]=U[t.chainName]},z=M.currentRoute.value.query.chain;if(z){let r=!1;for(let e=0;e<G.length;e++)if(G[e].value.toString().toUpperCase()==z.toString().toUpperCase()){t.chainName=z.toString().toUpperCase(),K(),r=!0;break}r||M.push({query:{chain:C.ETH}})}ee(()=>t.chainName,()=>{M.push({query:{chain:t.chainName}}),K()}),ee(()=>({...d}),()=>{X.value=Math.ceil(d.length/100),Z()});const X=m(1),$=m(1),Z=()=>{j.length=0,j.push(...d.slice(($.value-1)*100,$.value*100))},ae=r=>{$.value=r,Z()},te=()=>{L.length=0,t.tokens.forEach(r=>{L.push({label:F[r],prop:r})})},oe=async()=>{f.value=!0;for(let r=0;r<V.length;r++)if(V[r].value==N.value)return S.warning(a("chainTools.networkReuse")),f.value=!1,!1;return await Ce(N.value)?(H.value=!1,V.push({label:N.value,value:N.value})):S.error(a("chainTools.networkError")),f.value=!1,!0},ne=async()=>{f.value=!0;for(let e=0;e<E.length;e++)if(E[e].value==k.value)return S.warning(a("chainTools.networkReuse")),f.value=!1,!1;let r=await xe(t.chainName,t.network,k.value);r?(D.value=!1,E.push({label:r,value:k.value}),F[k.value]=r,J[k.value]=await Ue(t.chainName,t.network,k.value)):S.error(a("chainTools.tokenError")),f.value=!1},se=()=>{if(f.value=!0,w.value=w.value.trim(),w.value==""){S.warning(a("chainTools.noAddressTip")),f.value=!1;return}d.length=0,w.value.split(`
`).forEach((e,u)=>{e.trim()!=""&&d.push({serialNumber:(u+1).toString(),address:e.split("----")[0],status:a("chainTools.waitQuery")})}),I.value=!1,f.value=!1},re=async()=>{if(d.length==0||t.tokens.length==0)return;O.value=0,b.value=!1,te(),d.splice(0,Y.value-1);let r=0;const e=async()=>{if(b.value)return;const u=r++;if(u<d.length){const _=d[u];d[u].status=a("chainTools.inQuery");for(let v=0;v<t.tokens.length;v++){const c=t.tokens[v];let T;c==U[t.chainName]?T=await De(t.chainName,t.network,_.address):T=await He(t.chainName,t.network,c,_.address,J[c]),d[u][c]=T,v+1==L.length&&(d[u].status=a("chainTools.finishQuery"),O.value++,u+1==d.length&&(S.success(a("chainTools.finishQuery")),b.value=!0))}e()}};for(let u=0;u<t.threadCount;u++)setTimeout(e,100)},ue=()=>{const r=Fe($e(),"YYYYMMDDHHmmss"),e=d.map(u=>{let _=u.address;return t.tokens.forEach(v=>{_+="----"+F[v]+":"+u[v]}),_}).join(`\r
`);try{Ae.saveAs(new Blob([e],{type:"text/plain;charset=utf-8"}),a("chainTools.fileName1")+t.chainName+a("chainTools.fileName3")+r.value+".txt")}catch{}return e},ie=r=>{d.splice(r+($.value-1)*100,1)},de=r=>{const e=new FileReader;e.readAsText(r.raw,"UTF-8"),e.onload=function(u){u.target.result&&(w.value=u.target.result.toString())}},ce=r=>{P.value.clearFiles();const e=r[0];e.uid=Se(),P.value.handleStart(e)};return(r,e)=>{const u=Oe,_=Ye,v=je,c=Ne,T=Me,W=ze,me=Qe,pe=Pe,fe=qe,be=Re,Q=Ie,ve=Le,he=ye("upload-filled"),_e=Ee,ge=Be;return g(),B("div",We,[h("h1",null,i(s(a)("chainTools.bathQueryWallet")),1),h("div",Ge,i(s(a)("chainTools.queryTip")),1),o(pe,{inline:!0,model:t,class:"batchQueryBalanceForm"},{default:n(()=>[o(v,{label:s(a)("chainTools.chainNameLabel")},{default:n(()=>[o(_,{modelValue:t.chainName,"onUpdate:modelValue":e[0]||(e[0]=l=>t.chainName=l),class:"shortSelect",disabled:!b.value},{default:n(()=>[(g(!0),B(A,null,q(s(G),l=>(g(),R(u,{value:l.value,label:l.label,disabled:l.balanceDisable||l.disabled},null,8,["value","label","disabled"]))),256))]),_:1},8,["modelValue","disabled"])]),_:1},8,["label"]),o(v,{label:s(a)("chainTools.networkLabel")},{default:n(()=>[o(_,{disabled:!b.value,modelValue:t.network,"onUpdate:modelValue":e[1]||(e[1]=l=>t.network=l),class:"longSelect"},{default:n(()=>[(g(!0),B(A,null,q(V,l=>(g(),R(u,{value:l.value,label:l.label,disabled:l.disabled},null,8,["value","label","disabled"]))),256))]),_:1},8,["disabled","modelValue"]),o(c,{disabled:!b.value,type:"primary",onClick:e[2]||(e[2]=l=>H.value=!0)},{default:n(()=>[p(i(s(a)("chainTools.selfDefinedNetwork")),1)]),_:1},8,["disabled"]),o(W,{"destroy-on-close":"",title:s(a)("chainTools.addNetworkLabel"),"align-center":"",modelValue:H.value,"onUpdate:modelValue":e[5]||(e[5]=l=>H.value=l)},{footer:n(()=>[h("span",Je,[o(c,{type:"primary",onClick:e[4]||(e[4]=l=>oe()),disabled:f.value},{default:n(()=>[p(i(s(a)("utils.confirm")),1)]),_:1},8,["disabled"])])]),default:n(()=>[o(T,{class:"longInput",modelValue:N.value,"onUpdate:modelValue":e[3]||(e[3]=l=>N.value=l)},null,8,["modelValue"])]),_:1},8,["title","modelValue"])]),_:1},8,["label"]),o(v,{label:s(a)("chainTools.tokenLabel")},{default:n(()=>[o(_,{disabled:!b.value,multiple:"","collapse-tags":"","collapse-tags-tooltip":"",modelValue:t.tokens,"onUpdate:modelValue":e[6]||(e[6]=l=>t.tokens=l),class:"longSelect"},{default:n(()=>[(g(!0),B(A,null,q(E,l=>(g(),R(u,{value:l.value,label:l.label,disabled:l.disabled},null,8,["value","label","disabled"]))),256))]),_:1},8,["disabled","modelValue"]),o(c,{disabled:!b.value,type:"primary",onClick:e[7]||(e[7]=l=>D.value=!0)},{default:n(()=>[p(i(s(a)("chainTools.selfDefinedToken")),1)]),_:1},8,["disabled"]),o(W,{"destroy-on-close":"",title:s(a)("chainTools.addTokenLabel"),"align-center":"",modelValue:D.value,"onUpdate:modelValue":e[10]||(e[10]=l=>D.value=l)},{footer:n(()=>[h("span",Ke,[o(c,{type:"primary",onClick:e[9]||(e[9]=l=>ne()),disabled:f.value},{default:n(()=>[p(i(s(a)("utils.confirm")),1)]),_:1},8,["disabled"])])]),default:n(()=>[o(T,{class:"longInput",modelValue:k.value,"onUpdate:modelValue":e[8]||(e[8]=l=>k.value=l)},null,8,["modelValue"])]),_:1},8,["title","modelValue"])]),_:1},8,["label"]),o(v,{label:s(a)("utils.threadLabel")},{default:n(()=>[o(me,{disabled:!b.value,modelValue:t.threadCount,"onUpdate:modelValue":e[11]||(e[11]=l=>t.threadCount=l),min:1},null,8,["disabled","modelValue"])]),_:1},8,["label"])]),_:1},8,["model"]),h("div",Xe,[o(c,{disabled:!b.value,type:"info",onClick:e[12]||(e[12]=l=>I.value=!0)},{default:n(()=>[p(i(s(a)("chainTools.importAddress")),1)]),_:1},8,["disabled"]),o(c,{type:"primary",onClick:e[13]||(e[13]=l=>re())},{default:n(()=>[p(i(s(a)("chainTools.startQuery")),1)]),_:1}),o(c,{type:"warning",onClick:e[14]||(e[14]=l=>b.value=!0)},{default:n(()=>[p(i(s(a)("chainTools.stopQuery")),1)]),_:1}),o(c,{type:"primary",onClick:e[15]||(e[15]=l=>ue())},{default:n(()=>[p(i(s(a)("chainTools.dowmLoadTable")),1)]),_:1}),h("div",Ze,[p(i(s(a)("utils.startSerialNumber"))+" ",1),o(T,{modelValue:Y.value,"onUpdate:modelValue":e[16]||(e[16]=l=>Y.value=l),disabled:!b.value},null,8,["modelValue","disabled"])]),h("div",el,i(s(a)("chainTools.finishQueryCountLabbel"))+" "+i(O.value),1)]),h("div",ll,[o(be,{target:".batchQueryBalance",offset:80},{default:n(()=>[o(fe,{layout:"->,prev, pager, next","page-count":X.value,background:"",onCurrentChange:ae,"hide-on-single-page":!0},null,8,["page-count"])]),_:1}),o(ve,{data:j,"max-height":"500"},{default:n(()=>[o(Q,{prop:"serialNumber",label:s(a)("utils.serialNumber"),width:"60"},null,8,["label"]),o(Q,{prop:"address",label:s(a)("chainTools.address")},null,8,["label"]),(g(!0),B(A,null,q(L,l=>(g(),R(Q,{prop:l.prop,sortable:"",label:l.label},null,8,["prop","label"]))),256)),o(Q,{prop:"status",label:s(a)("utils.status"),width:"100"},null,8,["label"]),o(Q,{label:s(a)("utils.operation"),fixed:"right",width:"100"},{default:n(l=>[o(c,{link:"",type:"primary",size:"small",onClick:we(rl=>ie(l.$index),["prevent"])},{default:n(()=>[p(i(s(a)("utils.delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])]),o(W,{"destroy-on-close":"",title:s(a)("chainTools.importAddressLabel"),"align-center":"",modelValue:I.value,"onUpdate:modelValue":e[19]||(e[19]=l=>I.value=l)},{footer:n(()=>[h("span",al,[o(ge,{drag:"",ref_key:"upload",ref:P,limit:1,"auto-upload":!1,"on-change":de,"on-exceed":ce},{default:n(()=>[o(_e,{class:"el-icon--upload"},{default:n(()=>[o(he)]),_:1}),h("div",tl,[p(i(s(a)("utils.dragToHere"))+" or ",1),h("em",null,i(s(a)("utils.clickToUpload")),1),p("Â eg: address---- or address ")])]),_:1},512),o(c,{type:"primary",onClick:e[18]||(e[18]=l=>se()),disabled:f.value},{default:n(()=>[p(i(s(a)("utils.confirm")),1)]),_:1},8,["disabled"])])]),default:n(()=>[o(T,{class:"longInput",type:"textarea",rows:10,modelValue:w.value,"onUpdate:modelValue":e[17]||(e[17]=l=>w.value=l),placeholder:"eg: address---- or address"},null,8,["modelValue"])]),_:1},8,["title","modelValue"])])}}}),Cl=Ve(nl,[["__scopeId","data-v-a0c782c6"]]);export{Cl as default};
