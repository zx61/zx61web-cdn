import{d as q,bd as F,aV as G,a8 as T,bD as J,t as U,g as O,aq as K,bH as L,V as Q,bJ as Z,bG as ee,bX as te,bI as ne,aM as g,Y as se,$ as Y,f as oe,q as ae,bY as w,m as W,bz as ie}from"./chunk-bc202244.js";import{J as ce}from"./chunk-bbaf1278.js";const Ye=(e,t,n)=>{let s={offsetX:0,offsetY:0};const o=r=>{const u=r.clientX,p=r.clientY,{offsetX:v,offsetY:y}=s,d=e.value.getBoundingClientRect(),E=d.left,M=d.top,H=d.width,X=d.height,z=document.documentElement.clientWidth,N=document.documentElement.clientHeight,V=-E+v,$=-M+y,A=z-E-H+v,j=N-M-X+y,k=S=>{const x=Math.min(Math.max(v+S.clientX-u,V),A),C=Math.min(Math.max(y+S.clientY-p,$),j);s={offsetX:x,offsetY:C},e.value.style.transform=`translate(${T(x)}, ${T(C)})`},_=()=>{document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",_)};document.addEventListener("mousemove",k),document.addEventListener("mouseup",_)},i=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",o)},a=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",o)};q(()=>{F(()=>{n.value?i():a()})}),G(()=>{a()})},le=()=>{},re=Array.isArray,ue=e=>typeof e=="function",fe=e=>typeof e=="symbol";let de;function he(e,t=de){t&&t.active&&t.effects.push(e)}const me=e=>{const t=new Set(e);return t.w=0,t.n=0,t},P=e=>(e.w&l)>0,R=e=>(e.n&l)>0,pe=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=l},ve=e=>{const{deps:t}=e;if(t.length){let n=0;for(let s=0;s<t.length;s++){const o=t[s];P(o)&&!R(o)?o.delete(e):t[n++]=o,o.w&=~l,o.n&=~l}t.length=n}};let f=0,l=1;const b=30;let c;class ye{constructor(t,n=null,s){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,he(this,s)}run(){if(!this.active)return this.fn();let t=c,n=h;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=c,c=this,h=!0,l=1<<++f,f<=b?pe(this):I(this),this.fn()}finally{f<=b&&ve(this),l=1<<--f,c=this.parent,h=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){c===this?this.deferStop=!0:this.active&&(I(this),this.onStop&&this.onStop(),this.active=!1)}}function I(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let h=!0;function ge(e,t){let n=!1;f<=b?R(e)||(e.n|=l,n=!P(e)):n=!e.has(c),n&&(e.add(c),c.deps.push(e))}function we(e,t){const n=re(e)?e:[...e];for(const s of n)s.computed&&D(s);for(const s of n)s.computed||D(s)}function D(e,t){(e!==c||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(fe));function m(e){const t=e&&e.__v_raw;return t?m(t):e}function be(e){h&&c&&(e=m(e),ge(e.dep||(e.dep=me())))}function Ee(e,t){e=m(e);const n=e.dep;n&&we(n)}var B;class Me{constructor(t,n,s,o){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[B]=!1,this._dirty=!0,this.effect=new ye(t,()=>{this._dirty||(this._dirty=!0,Ee(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=s}get value(){const t=m(this);return be(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}B="__v_isReadonly";function ke(e,t,n=!1){let s,o;const i=ue(e);return i?(s=e,o=le):(s=e.get,o=e.set),new Me(s,o,i||!o,n)}const We=e=>{J(e)||U("[useLockscreen]","You need to pass a ref param to this function");const t=O("popup"),n=ke(()=>t.bm("parent","hidden"));if(!K||L(document.body,n.value))return;let s=0,o=!1,i="0";const a=()=>{setTimeout(()=>{ne(document==null?void 0:document.body,n.value),o&&document&&(document.body.style.width=i)},200)};Q(e,r=>{if(!r){a();return}o=!L(document.body,n.value),o&&(i=document.body.style.width),s=ce(t.namespace.value);const u=document.documentElement.clientHeight<document.body.scrollHeight,p=Z(document.body,"overflowY");s>0&&(u||p==="scroll")&&o&&(document.body.style.width=`calc(100% - ${s}px)`),ee(document.body,n.value)}),te(()=>a())},_e=e=>{if(!e)return{onClick:g,onMousedown:g,onMouseup:g};let t=!1,n=!1;return{onClick:a=>{t&&n&&e(a),t=n=!1},onMousedown:a=>{t=a.target===a.currentTarget},onMouseup:a=>{n=a.target===a.currentTarget}}},Se=se({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:Y([String,Array,Object])},zIndex:{type:Y([String,Number])}}),xe={click:e=>e instanceof MouseEvent};var Ce=oe({name:"ElOverlay",props:Se,emits:xe,setup(e,{slots:t,emit:n}){const s=O("overlay"),o=u=>{n("click",u)},{onClick:i,onMousedown:a,onMouseup:r}=_e(e.customMaskEvent?void 0:o);return()=>e.mask?ae("div",{class:[s.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:i,onMousedown:a,onMouseup:r},[W(t,"default")],w.STYLE|w.CLASS|w.PROPS,["onClick","onMouseup","onMousedown"]):ie("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[W(t,"default")])}});const Ie=Ce;export{Ie as E,We as a,_e as b,Ye as u};
