import{e as Z,u as B,s as V,D as C,o as g,c as L,b as n,t as p,g as t,i as a,w as l,q as M,p as S,a as D,v as c,j as f,l as v,k as F,_ as W}from"./chunk-c4e2faa5.js";import{a as j,D as T,e as G,f as H,E as P}from"./chunk-b3d26a00.js";import{_ as J}from"./chunk-92cfb116.js";const $=i=>/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9]{2,})+$/.test(i),K=i=>/^[\w\u4e00-\u9fa5_!@#$%^&*`~()-+=]{4,16}$/.test(i),k=i=>/^(?![a-zA-Z]+$)(?![A-Z0-9]+$)(?![A-Z\W_!@#$%^&*`~()-+=]+$)(?![a-z0-9]+$)(?![a-z\W_!@#$%^&*`~()-+=]+$)(?![0-9\W_!@#$%^&*`~()-+=]+$)[a-zA-Z0-9\W_!@#$%^&*`~()-+=]/.test(i),Q=i=>(S("data-v-f21462d6"),i=i(),D(),i),X={class:"bigBox"},Y={class:"box",ref:"box"},ee={class:"pre-box"},oe={class:"text_markedness"},re=Q(()=>n("div",{class:"img-box"},[n("img",{src:J,id:"avatar"})],-1)),te={class:"login-form"},se={class:"formLogin"},ae={target:"_blank",href:"/documents/privacyPolicy",style:{"text-decoration":"none"}},le={target:"_blank",href:"/documents/serviceAgreement",style:{"text-decoration":"none"}},ne=Z({__name:"index",setup(i){var U;const{t:o}=B(),h=M(),x=V(!1),d=V(!1),N=V(),u=C({emailOrUserName:"",password:"",rePassword:"",inviteCode:((U=h.currentRoute.value.query.inviteCode)==null?void 0:U.toString())||""}),A=C({emailOrUserName:[{validator:(_,e,r)=>{e===""&&r(new Error(o("login.emailOrUserNameNull"))),d.value&&($(e)||r(new Error(o("login.errorEmail")))),d.value||!$(e)&&!K(e)&&r(new Error(o("login.errorEmailOrUserName"))),r()},trigger:"blur"}],password:[{validator:(_,e,r)=>{e===""&&r(new Error(o("login.passwordNull"))),k(e)||r(new Error(o("login.errorPassword"))),r()},trigger:"blur"}],rePassword:[{validator:(_,e,r)=>{e===""&&r(new Error(o("login.passwordNull"))),k(e)||r(new Error(o("login.errorPassword"))),e!=u.password&&r(new Error(o("login.eeSetPasswordNotMatch"))),r()},trigger:"blur"}],inviteCode:[{validator:(_,e,r)=>{e===""&&r(new Error(o("login.inviteCodeNull"))),r()},trigger:"blur"}]}),w=()=>x.value?!0:(P.error(o("login.readUserAgreement")),!1),E=async()=>{var e;return await((e=N.value)==null?void 0:e.validate(r=>(r||P.error(o("login.errorData")),r)))},O=async()=>{w()&&await E()},R=async()=>{w()&&await E()},I=()=>{w()&&window.ethereum.request({method:"eth_requestAccounts"}).then(_=>{const e=_[0],r="My email is amin@quejinqiu.com - 1637836206101";window.ethereum.request({method:"personal_sign",params:[r,e]}).then(console.log).catch(m=>{})}).catch(_=>{})},q=async()=>{w()&&await E()};return(_,e)=>{const r=T,m=G,y=H,b=F,z=j;return g(),L("div",X,[n("div",Y,[n("div",ee,[n("h1",null,p(t(o)("login.welcoming")),1),n("div",oe,p(t(o)("login.announcement")),1),re]),n("div",te,[n("h1",null,p(t(o)("utils.login")),1),n("div",se,[a(z,{"label-width":"100px",model:u,rules:A,ref_key:"loginFormRef",ref:N},{default:l(()=>[a(m,null,{default:l(()=>[a(r,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=s=>d.value=s),label:t(o)("login.toRegister")},null,8,["modelValue","label"])]),_:1}),a(m,{label:d.value?t(o)("utils.email"):t(o)("utils.emailOrUserName"),prop:"emailOrUserName"},{default:l(()=>[a(y,{modelValue:u.emailOrUserName,"onUpdate:modelValue":e[1]||(e[1]=s=>u.emailOrUserName=s)},null,8,["modelValue"])]),_:1},8,["label"]),a(m,{label:t(o)("utils.password"),prop:"password"},{default:l(()=>[a(y,{modelValue:u.password,"onUpdate:modelValue":e[2]||(e[2]=s=>u.password=s),type:"password"},null,8,["modelValue"])]),_:1},8,["label"]),d.value?(g(),c(m,{key:0,label:t(o)("utils.rePassword"),prop:"rePassword"},{default:l(()=>[a(y,{modelValue:u.rePassword,"onUpdate:modelValue":e[3]||(e[3]=s=>u.rePassword=s),type:"password"},null,8,["modelValue"])]),_:1},8,["label"])):f("",!0),d.value?(g(),c(m,{key:1,label:t(o)("utils.inviteCode"),prop:"inviteCode"},{default:l(()=>[a(y,{modelValue:u.inviteCode,"onUpdate:modelValue":e[4]||(e[4]=s=>u.inviteCode=s)},null,8,["modelValue"])]),_:1},8,["label"])):f("",!0),a(m,null,{default:l(()=>[a(r,{modelValue:x.value,"onUpdate:modelValue":e[5]||(e[5]=s=>x.value=s),label:t(o)("login.checkboxText")},null,8,["modelValue","label"]),n("a",ae," 【"+p(t(o)("login.privacyPolicy"))+"】 ",1),v(" 和 "),n("a",le," 【"+p(t(o)("login.serviceAgreement"))+"】 ",1)]),_:1}),d.value?f("",!0):(g(),c(m,{key:2},{default:l(()=>[a(b,{type:"primary",onClick:e[6]||(e[6]=s=>O())},{default:l(()=>[v("   "+p(t(o)("utils.login"))+"    ",1)]),_:1}),a(b,{type:"primary",onClick:e[7]||(e[7]=s=>R())},{default:l(()=>[v(p(t(o)("utils.subAccountLogin")),1)]),_:1})]),_:1})),d.value?f("",!0):(g(),c(m,{key:3,label:t(o)("utils.thirdPartyLogin")},{default:l(()=>[a(b,{type:"primary",onClick:e[8]||(e[8]=s=>I())},{default:l(()=>[v(" MetaMask ")]),_:1})]),_:1},8,["label"])),d.value?(g(),c(m,{key:4},{default:l(()=>[a(b,{type:"primary",onClick:e[9]||(e[9]=s=>q())},{default:l(()=>[v("   "+p(t(o)("utils.register"))+"   ",1)]),_:1})]),_:1})):f("",!0)]),_:1},8,["model","rules"])])])],512)])}}});const ce=W(ne,[["__scopeId","data-v-f21462d6"]]);export{ce as default};
