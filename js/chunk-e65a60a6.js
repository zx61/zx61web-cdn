import{d as ue,au as ke,aA as Ee,a8 as K,bH as Me,t as Se,g as te,aE as de,bL as se,V as Z,bN as Te,bK as De,bP as Ie,bM as Be,bj as X,Y as oe,$ as G,f as W,q as V,bQ as j,m as C,aY as $e,Z as Ae,ai as _e,aw as ne,bR as Pe,h as F,o as R,c as q,b as x,k,j as o,F as Re,w as B,i as Q,P as Fe,E as Le,x as J,n as fe,y as me,bS as Oe,bT as Ne,a0 as ze,bE as Ye,bc as le,r as $,bU as Ve,ad as We,ac as xe,bV as He,bW as ae,bb as Ue,a5 as ie,aN as Xe,al as je,bX as qe,bq as Ke,aQ as Ze,aB as Ge,T as Qe,bY as Je,z as et}from"./chunk-8e5325a7.js";import{K as tt,U as pe}from"./chunk-9dc61d7f.js";const ve=Symbol("dialogInjectionKey"),ot=(e,t,s)=>{let n={offsetX:0,offsetY:0};const l=r=>{const d=r.clientX,p=r.clientY,{offsetX:m,offsetY:v}=n,a=e.value.getBoundingClientRect(),f=a.left,M=a.top,L=a.width,O=a.height,N=document.documentElement.clientWidth,A=document.documentElement.clientHeight,z=-f+m,_=-M+v,S=N-f-L+m,T=A-M-O+v,P=w=>{const i=Math.min(Math.max(m+w.clientX-d,z),S),g=Math.min(Math.max(v+w.clientY-p,_),T);n={offsetX:i,offsetY:g},e.value.style.transform=`translate(${K(i)}, ${K(g)})`},y=()=>{document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",y)};document.addEventListener("mousemove",P),document.addEventListener("mouseup",y)},u=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",l)},c=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",l)};ue(()=>{ke(()=>{s.value?u():c()})}),Ee(()=>{c()})},st=()=>{},nt=Array.isArray,lt=e=>typeof e=="function",at=e=>typeof e=="symbol";let it;function rt(e,t=it){t&&t.active&&t.effects.push(e)}const ct=e=>{const t=new Set(e);return t.w=0,t.n=0,t},ye=e=>(e.w&E)>0,he=e=>(e.n&E)>0,ut=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=E},dt=e=>{const{deps:t}=e;if(t.length){let s=0;for(let n=0;n<t.length;n++){const l=t[n];ye(l)&&!he(l)?l.delete(e):t[s++]=l,l.w&=~E,l.n&=~E}t.length=s}};let Y=0,E=1;const ee=30;let b;class ft{constructor(t,s=null,n){this.fn=t,this.scheduler=s,this.active=!0,this.deps=[],this.parent=void 0,rt(this,n)}run(){if(!this.active)return this.fn();let t=b,s=H;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=b,b=this,H=!0,E=1<<++Y,Y<=ee?ut(this):re(this),this.fn()}finally{Y<=ee&&dt(this),E=1<<--Y,b=this.parent,H=s,this.parent=void 0,this.deferStop&&this.stop()}}stop(){b===this?this.deferStop=!0:this.active&&(re(this),this.onStop&&this.onStop(),this.active=!1)}}function re(e){const{deps:t}=e;if(t.length){for(let s=0;s<t.length;s++)t[s].delete(e);t.length=0}}let H=!0;function mt(e,t){let s=!1;Y<=ee?he(e)||(e.n|=E,s=!ye(e)):s=!e.has(b),s&&(e.add(b),b.deps.push(e))}function pt(e,t){const s=nt(e)?e:[...e];for(const n of s)n.computed&&ce(n);for(const n of s)n.computed||ce(n)}function ce(e,t){(e!==b||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(at));function U(e){const t=e&&e.__v_raw;return t?U(t):e}function vt(e){H&&b&&(e=U(e),mt(e.dep||(e.dep=ct())))}function yt(e,t){e=U(e);const s=e.dep;s&&pt(s)}var ge;class ht{constructor(t,s,n,l){this._setter=s,this.dep=void 0,this.__v_isRef=!0,this[ge]=!1,this._dirty=!0,this.effect=new ft(t,()=>{this._dirty||(this._dirty=!0,yt(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!l,this.__v_isReadonly=n}get value(){const t=U(this);return vt(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}ge="__v_isReadonly";function gt(e,t,s=!1){let n,l;const u=lt(e);return u?(n=e,l=st):(n=e.get,l=e.set),new ht(n,l,u||!l,s)}const bt=e=>{Me(e)||Se("[useLockscreen]","You need to pass a ref param to this function");const t=te("popup"),s=gt(()=>t.bm("parent","hidden"));if(!de||se(document.body,s.value))return;let n=0,l=!1,u="0";const c=()=>{setTimeout(()=>{Be(document==null?void 0:document.body,s.value),l&&document&&(document.body.style.width=u)},200)};Z(e,r=>{if(!r){c();return}l=!se(document.body,s.value),l&&(u=document.body.style.width),n=tt(t.namespace.value);const d=document.documentElement.clientHeight<document.body.scrollHeight,p=Te(document.body,"overflowY");n>0&&(d||p==="scroll")&&l&&(document.body.style.width=`calc(100% - ${n}px)`),De(document.body,s.value)}),Ie(()=>c())},be=e=>{if(!e)return{onClick:X,onMousedown:X,onMouseup:X};let t=!1,s=!1;return{onClick:c=>{t&&s&&e(c),t=s=!1},onMousedown:c=>{t=c.target===c.currentTarget},onMouseup:c=>{s=c.target===c.currentTarget}}},Ct=oe({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:G([String,Array,Object])},zIndex:{type:G([String,Number])}}),wt={click:e=>e instanceof MouseEvent};var kt=W({name:"ElOverlay",props:Ct,emits:wt,setup(e,{slots:t,emit:s}){const n=te("overlay"),l=d=>{s("click",d)},{onClick:u,onMousedown:c,onMouseup:r}=be(e.customMaskEvent?void 0:l);return()=>e.mask?V("div",{class:[n.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:u,onMousedown:c,onMouseup:r},[C(t,"default")],j.STYLE|j.CLASS|j.PROPS,["onClick","onMouseup","onMousedown"]):$e("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[C(t,"default")])}});const Et=kt,Ce=oe({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:Ae},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),Mt={close:()=>!0},St=["aria-label"],Tt=["id"],Dt=W({name:"ElDialogContent"}),It=W({...Dt,props:Ce,emits:Mt,setup(e){const t=e,{t:s}=_e(),{Close:n}=Oe,{dialogRef:l,headerRef:u,bodyId:c,ns:r,style:d}=ne(ve),{focusTrapRef:p}=ne(Pe),m=Ne(p,l),v=F(()=>t.draggable);return ot(l,u,v),(a,f)=>(R(),q("div",{ref:o(m),class:k([o(r).b(),o(r).is("fullscreen",a.fullscreen),o(r).is("draggable",o(v)),o(r).is("align-center",a.alignCenter),{[o(r).m("center")]:a.center},a.customClass]),style:fe(o(d)),tabindex:"-1"},[x("header",{ref_key:"headerRef",ref:u,class:k(o(r).e("header"))},[C(a.$slots,"header",{},()=>[x("span",{role:"heading",class:k(o(r).e("title"))},Re(a.title),3)]),a.showClose?(R(),q("button",{key:0,"aria-label":o(s)("el.dialog.close"),class:k(o(r).e("headerbtn")),type:"button",onClick:f[0]||(f[0]=M=>a.$emit("close"))},[V(o(Le),{class:k(o(r).e("close"))},{default:B(()=>[(R(),Q(Fe(a.closeIcon||o(n))))]),_:1},8,["class"])],10,St)):J("v-if",!0)],2),x("div",{id:o(c),class:k(o(r).e("body"))},[C(a.$slots,"default")],10,Tt),a.$slots.footer?(R(),q("footer",{key:0,class:k(o(r).e("footer"))},[C(a.$slots,"footer")],2)):J("v-if",!0)],6))}});var Bt=me(It,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const $t=oe({...Ce,appendToBody:{type:Boolean,default:!1},beforeClose:{type:G(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),At={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[pe]:e=>ze(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},_t=(e,t)=>{const n=xe().emit,{nextZIndex:l}=Ye();let u="";const c=le(),r=le(),d=$(!1),p=$(!1),m=$(!1),v=$(e.zIndex||l());let a,f;const M=Ve("namespace",He),L=F(()=>{const h={},I=`--${M.value}-dialog`;return e.fullscreen||(e.top&&(h[`${I}-margin-top`]=e.top),e.width&&(h[`${I}-width`]=K(e.width))),h}),O=F(()=>e.alignCenter?{display:"flex"}:{});function N(){n("opened")}function A(){n("closed"),n(pe,!1),e.destroyOnClose&&(m.value=!1)}function z(){n("close")}function _(){f==null||f(),a==null||a(),e.openDelay&&e.openDelay>0?{stop:a}=ae(()=>y(),e.openDelay):y()}function S(){a==null||a(),f==null||f(),e.closeDelay&&e.closeDelay>0?{stop:f}=ae(()=>w(),e.closeDelay):w()}function T(){function h(I){I||(p.value=!0,d.value=!1)}e.beforeClose?e.beforeClose(h):S()}function P(){e.closeOnClickModal&&T()}function y(){de&&(d.value=!0)}function w(){d.value=!1}function i(){n("openAutoFocus")}function g(){n("closeAutoFocus")}function D(h){var I;((I=h.detail)==null?void 0:I.focusReason)==="pointer"&&h.preventDefault()}e.lockScroll&&bt(d);function we(){e.closeOnPressEscape&&T()}return Z(()=>e.modelValue,h=>{h?(p.value=!1,_(),m.value=!0,v.value=e.zIndex?v.value++:l(),We(()=>{n("open"),t.value&&(t.value.scrollTop=0)})):d.value&&S()}),Z(()=>e.fullscreen,h=>{t.value&&(h?(u=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=u)}),ue(()=>{e.modelValue&&(d.value=!0,m.value=!0,_())}),{afterEnter:N,afterLeave:A,beforeLeave:z,handleClose:T,onModalClick:P,close:S,doClose:w,onOpenAutoFocus:i,onCloseAutoFocus:g,onCloseRequested:we,onFocusoutPrevented:D,titleId:c,bodyId:r,closed:p,style:L,overlayDialogStyle:O,rendered:m,visible:d,zIndex:v}},Pt=["aria-label","aria-labelledby","aria-describedby"],Rt=W({name:"ElDialog",inheritAttrs:!1}),Ft=W({...Rt,props:$t,emits:At,setup(e,{expose:t}){const s=e,n=Ue();ie({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},F(()=>!!n.title)),ie({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},F(()=>!!s.customClass));const l=te("dialog"),u=$(),c=$(),r=$(),{visible:d,titleId:p,bodyId:m,style:v,overlayDialogStyle:a,rendered:f,zIndex:M,afterEnter:L,afterLeave:O,beforeLeave:N,handleClose:A,onModalClick:z,onOpenAutoFocus:_,onCloseAutoFocus:S,onCloseRequested:T,onFocusoutPrevented:P}=_t(s,u);Xe(ve,{dialogRef:u,headerRef:c,bodyId:m,ns:l,rendered:f,style:v});const y=be(z),w=F(()=>s.draggable&&!s.fullscreen);return t({visible:d,dialogContentRef:r}),(i,g)=>(R(),Q(Je,{to:"body",disabled:!i.appendToBody},[V(Qe,{name:"dialog-fade",onAfterEnter:o(L),onAfterLeave:o(O),onBeforeLeave:o(N),persisted:""},{default:B(()=>[je(V(o(Et),{"custom-mask-event":"",mask:i.modal,"overlay-class":i.modalClass,"z-index":o(M)},{default:B(()=>[x("div",{role:"dialog","aria-modal":"true","aria-label":i.title||void 0,"aria-labelledby":i.title?void 0:o(p),"aria-describedby":o(m),class:k(`${o(l).namespace.value}-overlay-dialog`),style:fe(o(a)),onClick:g[0]||(g[0]=(...D)=>o(y).onClick&&o(y).onClick(...D)),onMousedown:g[1]||(g[1]=(...D)=>o(y).onMousedown&&o(y).onMousedown(...D)),onMouseup:g[2]||(g[2]=(...D)=>o(y).onMouseup&&o(y).onMouseup(...D))},[V(o(qe),{loop:"",trapped:o(d),"focus-start-el":"container",onFocusAfterTrapped:o(_),onFocusAfterReleased:o(S),onFocusoutPrevented:o(P),onReleaseRequested:o(T)},{default:B(()=>[o(f)?(R(),Q(Bt,Ke({key:0,ref_key:"dialogContentRef",ref:r},i.$attrs,{"custom-class":i.customClass,center:i.center,"align-center":i.alignCenter,"close-icon":i.closeIcon,draggable:o(w),fullscreen:i.fullscreen,"show-close":i.showClose,title:i.title,onClose:o(A)}),Ze({header:B(()=>[i.$slots.title?C(i.$slots,"title",{key:1}):C(i.$slots,"header",{key:0,close:o(A),titleId:o(p),titleClass:o(l).e("title")})]),default:B(()=>[C(i.$slots,"default")]),_:2},[i.$slots.footer?{name:"footer",fn:B(()=>[C(i.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):J("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,Pt)]),_:3},8,["mask","overlay-class","z-index"]),[[Ge,o(d)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var Lt=me(Ft,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const zt=et(Lt);export{zt as E};
