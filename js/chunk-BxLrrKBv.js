import{d as j,v as G,u as H,h as M,e as E,r as f,ad as q,bG as z,E as d,o as C,c as J,b as y,t as u,f as t,k as p,g as l,w as s,j as P,i as K,F as O,bH as Q,bI as W,bJ as X,z as Y}from"./chunk-bN8bH30D.js";import{E as Z}from"./chunk-BkShT7WH.js";import{a as ee,E as te}from"./chunk-CJ6aAzYL.js";import{E as ae,a as le}from"./chunk-B9C5NW1w.js";import{E as oe}from"./chunk-Cch2kbmk.js";import{E as ne,a as se}from"./chunk-D0Iu-s9x.js";import"./chunk-Dh26Qr1W.js";import"./chunk-C-HMdayx.js";import"./chunk-BB_Ol6Sd.js";import"./chunk-mWAOJ9ad.js";import"./chunk-D9wEq4bu.js";import"./chunk-DfdmAFhS.js";import"./chunk-Cc-YmMIf.js";const ue={class:"text_markedness"},ie={target:"_blank",href:"/documents/sdkLogin",style:{"text-decoration":"none"}},pe=y("br",null,null,-1),xe=j({__name:"index",setup(re){const{t:e}=G.useI18n(),L=H(),I=M();L.getUserItem("type")!="account"&&I.push("/account");const c=E([]),g=f(!1);let n=E({appId:"",appName:"",origin:"",whiteList:"",status:"whiteList"});const b=f(!0),h=f(e("account.create")+e("account.app")),w=f(!1),k=f(""),m=f(0),U=()=>{h.value=e("account.create")+e("account.app"),b.value=!0,g.value=!0,m.value=c.length},A=(i,a)=>{h.value=e("account.change")+e("account.app"),b.value=!1,g.value=!0,n=i,m.value=a},D=(i,a)=>{w.value=!0,m.value=a},$=async()=>{if(!n.appName)return d.error(e("login.errorData"));const i=b.value?await Q({appName:n.appName,origin:n.origin,whiteList:n.whiteList.split(","),status:n.status}):await W({appId:n.appId,appName:n.appName,origin:n.origin,whiteList:n.whiteList.split(","),status:n.status});if(i.data.msg)d.error(i.data.msg);else{const a=i.data.data;a.statusCN=e("account."+a.status),a.whiteList=a.whiteList.toString(),c[m.value]=a,d.success(e(b?"account.create":"account.change")+e("account.success")),g.value=!1}},F=()=>{const i=L.getUserItem("email");if(k.value!=i)return d.error(e("login.errorData"));X({appId:c[m.value].appId}).then(a=>{a.data.msg?d.error(a.data.msg):(d.success(e("utils.delete")+e("account.success")),c.splice(m.value,1),w.value=!1)})};return q(()=>{z().then(i=>{i.data.msg?d.error(i.data.msg):i.data.data.forEach(r=>{r.statusCN=e("account."+r.status),r.whiteList=r.whiteList.toString(),c.push(r)})})}),(i,a)=>{const r=Y,v=ne,T=se,_=ee,V=oe,x=ae,B=le,S=te,N=Z;return C(),J(O,null,[y("h1",null,u(t(e)("menu.appCenter")),1),y("div",ue,[y("a",ie,u(t(e)("account.toSdkApi")),1),p(" "+u(t(e)("account.appTip"))+" ",1),l(r,{type:"primary",style:{"margin-top":"1em","margin-bottom":"1em"},onClick:a[0]||(a[0]=o=>U())},{default:s(()=>[p(u(t(e)("account.create")+t(e)("account.app")),1)]),_:1})]),l(T,{data:c},{default:s(()=>[l(v,{type:"expand"},{default:s(o=>[p(u(t(e)("account.origin")+"  "+o.row.origin)+" ",1),pe,p(" "+u(t(e)("account.whiteList")+"  "+o.row.whiteList),1)]),_:1}),l(v,{prop:"appName",label:t(e)("account.appName")},null,8,["label"]),l(v,{prop:"appId",label:t(e)("account.appId")},null,8,["label"]),l(v,{prop:"statusCN",label:t(e)("utils.status")},null,8,["label"]),l(v,{label:t(e)("utils.operation"),width:"220px"},{default:s(o=>[l(r,{type:"primary",link:"",onClick:R=>A(o.row,o.$index)},{default:s(()=>[p(u(t(e)("account.edit")),1)]),_:2},1032,["onClick"]),l(r,{type:"danger",link:"",onClick:R=>D(o.row,o.$index)},{default:s(()=>[p(u(t(e)("utils.delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"]),l(N,{modelValue:g.value,"onUpdate:modelValue":a[6]||(a[6]=o=>g.value=o),"align-center":"","destroy-on-close":"",style:{"max-width":"600px"},title:h.value},{default:s(()=>[l(S,{class:"appForm","label-width":"100px",model:t(n)},{default:s(()=>[b.value?K("",!0):(C(),P(_,{key:0,label:t(e)("account.appId")},{default:s(()=>[p(u(t(n).appId),1)]),_:1},8,["label"])),l(_,{label:t(e)("account.appName"),required:""},{default:s(()=>[l(V,{modelValue:t(n).appName,"onUpdate:modelValue":a[1]||(a[1]=o=>t(n).appName=o)},null,8,["modelValue"])]),_:1},8,["label"]),l(_,{label:t(e)("account.origin")},{default:s(()=>[l(V,{modelValue:t(n).origin,"onUpdate:modelValue":a[2]||(a[2]=o=>t(n).origin=o)},null,8,["modelValue"])]),_:1},8,["label"]),l(_,{label:t(e)("account.whiteList")},{default:s(()=>[l(V,{modelValue:t(n).whiteList,"onUpdate:modelValue":a[3]||(a[3]=o=>t(n).whiteList=o),rows:3,type:"textarea",placeholder:t(e)("account.whiteListPlaceHolder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(_,{label:t(e)("utils.status")},{default:s(()=>[l(B,{modelValue:t(n).status,"onUpdate:modelValue":a[4]||(a[4]=o=>t(n).status=o)},{default:s(()=>[l(x,{label:"blockUp"},{default:s(()=>[p(u(t(e)("account.blockUp")),1)]),_:1}),l(x,{label:"normal"},{default:s(()=>[p(u(t(e)("account.normal")),1)]),_:1}),l(x,{label:"whiteList"},{default:s(()=>[p(u(t(e)("account.whiteList")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(_,null,{default:s(()=>[l(r,{type:"primary",onClick:a[5]||(a[5]=o=>$())},{default:s(()=>[p(u(t(e)("utils.save")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),l(N,{modelValue:w.value,"onUpdate:modelValue":a[9]||(a[9]=o=>w.value=o),"align-center":"","destroy-on-close":"",style:{"max-width":"600px"},title:t(e)("utils.delete")+t(e)("account.app")},{default:s(()=>[p(u(t(e)("account.deleteTip"))+" ",1),l(V,{modelValue:k.value,"onUpdate:modelValue":a[7]||(a[7]=o=>k.value=o)},null,8,["modelValue"]),l(r,{type:"primary",style:{"margin-top":"1em"},onClick:a[8]||(a[8]=o=>F())},{default:s(()=>[p(u(t(e)("utils.save")),1)]),_:1})]),_:1},8,["modelValue","title"])],64)}}});export{xe as default};
