import{d as M,v as q,u as z,h as J,e as E,r as _,ad as O,bG as P,E as c,o as L,c as C,b as h,t as i,f as a,k as r,g as o,w as s,j as K,i as Q,F as I,l as W,bH as X,bI as Y,bJ as Z,z as ee}from"./chunk-Czqc0dE8.js";import{E as te}from"./chunk-B2R6DWAK.js";import{a as ae,E as le}from"./chunk-CLZwLkAm.js";import{E as oe,a as ne}from"./chunk-OHjJ2leu.js";import{E as se}from"./chunk-CWG-aGsG.js";import{E as ue,a as ie}from"./chunk-fOJCMQd6.js";import"./chunk-BB8cIw-t.js";import"./chunk-7TUX3IvC.js";import"./chunk-BB_Ol6Sd.js";import"./chunk--j5HiCuQ.js";import"./chunk-DNlyfVOr.js";const pe={class:"text_markedness"},re={target:"_blank",href:"/documents/sdkLogin",style:{"text-decoration":"none"}},ce=h("br",null,null,-1),Le=M({__name:"index",setup(de){const{t:e}=q.useI18n(),x=z(),U=J();x.getUserItem("type")!="account"&&U.push("/account");const d=E([]),f=_(!1);let n=E({appId:"",appName:"",origin:"",whiteList:"",status:"whiteList"});const v=_(!0),y=_(e("account.create")+e("account.app")),w=_(!1),k=_(""),m=_(0),A=()=>{y.value=e("account.create")+e("account.app"),v.value=!0,f.value=!0,m.value=d.length},D=(u,t)=>{y.value=e("account.change")+e("account.app"),v.value=!1,f.value=!0,n=u,m.value=t},$=[{label:e("account.blockUp"),value:"blockUp"},{label:e("account.normal"),value:"normal"},{label:e("account.whiteList"),value:"whiteList"}],F=(u,t)=>{w.value=!0,m.value=t},T=async()=>{if(!n.appName)return c.error(e("login.errorData"));const u=v.value?await X({appName:n.appName,origin:n.origin,whiteList:n.whiteList.split(","),status:n.status}):await Y({appId:n.appId,appName:n.appName,origin:n.origin,whiteList:n.whiteList.split(","),status:n.status});if(u.data.msg)c.error(u.data.msg);else{const t=u.data.data;t.statusCN=e("account."+t.status),t.whiteList=t.whiteList.toString(),d[m.value]=t,c.success(e(v?"account.create":"account.change")+e("account.success")),f.value=!1}},B=()=>{const u=x.getUserItem("email");if(k.value!=u)return c.error(e("login.errorData"));Z({appId:d[m.value].appId}).then(t=>{t.data.msg?c.error(t.data.msg):(c.success(e("utils.delete")+e("account.success")),d.splice(m.value,1),w.value=!1)})};return O(()=>{P().then(u=>{u.data.msg?c.error(u.data.msg):u.data.data.forEach(p=>{p.statusCN=e("account."+p.status),p.whiteList=p.whiteList.toString(),d.push(p)})})}),(u,t)=>{const p=ee,b=ue,S=ie,g=ae,V=se,R=oe,j=ne,G=le,N=te;return L(),C(I,null,[h("h1",null,i(a(e)("menu.appCenter")),1),h("div",pe,[h("a",re,i(a(e)("account.toSdkApi")),1),r(" "+i(a(e)("account.appTip"))+" ",1),o(p,{type:"primary",style:{"margin-top":"1em","margin-bottom":"1em"},onClick:t[0]||(t[0]=l=>A())},{default:s(()=>[r(i(a(e)("account.create")+a(e)("account.app")),1)]),_:1})]),o(S,{data:d},{default:s(()=>[o(b,{type:"expand"},{default:s(l=>[r(i(a(e)("account.origin")+"  "+l.row.origin)+" ",1),ce,r(" "+i(a(e)("account.whiteList")+"  "+l.row.whiteList),1)]),_:1}),o(b,{prop:"appName",label:a(e)("account.appName")},null,8,["label"]),o(b,{prop:"appId",label:a(e)("account.appId")},null,8,["label"]),o(b,{prop:"statusCN",label:a(e)("utils.status")},null,8,["label"]),o(b,{label:a(e)("utils.operation"),width:"220px"},{default:s(l=>[o(p,{type:"primary",link:"",onClick:H=>D(l.row,l.$index)},{default:s(()=>[r(i(a(e)("account.edit")),1)]),_:2},1032,["onClick"]),o(p,{type:"danger",link:"",onClick:H=>F(l.row,l.$index)},{default:s(()=>[r(i(a(e)("utils.delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"]),o(N,{modelValue:f.value,"onUpdate:modelValue":t[6]||(t[6]=l=>f.value=l),"align-center":"","destroy-on-close":"",style:{width:"600px"},title:y.value},{default:s(()=>[o(G,{class:"appForm","label-width":"100px",model:a(n)},{default:s(()=>[v.value?Q("",!0):(L(),K(g,{key:0,label:a(e)("account.appId")},{default:s(()=>[r(i(a(n).appId),1)]),_:1},8,["label"])),o(g,{label:a(e)("account.appName"),required:""},{default:s(()=>[o(V,{modelValue:a(n).appName,"onUpdate:modelValue":t[1]||(t[1]=l=>a(n).appName=l),maxlength:"10"},null,8,["modelValue"])]),_:1},8,["label"]),o(g,{label:a(e)("account.origin")},{default:s(()=>[o(V,{modelValue:a(n).origin,"onUpdate:modelValue":t[2]||(t[2]=l=>a(n).origin=l)},null,8,["modelValue"])]),_:1},8,["label"]),o(g,{label:a(e)("account.whiteList")},{default:s(()=>[o(V,{modelValue:a(n).whiteList,"onUpdate:modelValue":t[3]||(t[3]=l=>a(n).whiteList=l),rows:3,type:"textarea",placeholder:a(e)("account.whiteListPlaceHolder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(g,{label:a(e)("utils.status")},{default:s(()=>[o(j,{modelValue:a(n).status,"onUpdate:modelValue":t[4]||(t[4]=l=>a(n).status=l)},{default:s(()=>[(L(),C(I,null,W($,l=>o(R,{value:l.value,label:l.label},null,8,["value","label"])),64))]),_:1},8,["modelValue"])]),_:1},8,["label"]),o(g,null,{default:s(()=>[o(p,{type:"primary",onClick:t[5]||(t[5]=l=>T())},{default:s(()=>[r(i(a(e)("utils.save")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),o(N,{modelValue:w.value,"onUpdate:modelValue":t[9]||(t[9]=l=>w.value=l),"align-center":"","destroy-on-close":"",style:{"max-width":"600px"},title:a(e)("utils.delete")+a(e)("account.app")},{default:s(()=>[r(i(a(e)("account.deleteTip"))+" ",1),o(V,{modelValue:k.value,"onUpdate:modelValue":t[7]||(t[7]=l=>k.value=l)},null,8,["modelValue"]),o(p,{type:"primary",style:{"margin-top":"1em"},onClick:t[8]||(t[8]=l=>B())},{default:s(()=>[r(i(a(e)("utils.save")),1)]),_:1})]),_:1},8,["modelValue","title"])],64)}}});export{Le as default};
